!function($,document,window,navigator){"use strict";var current,pluginCount=0,isOldie=function(){var v,n=navigator.userAgent,r=/msie\s\d+/i;return n.search(r)>0&&(v=r.exec(n).toString(),v=v.split(" ")[1],9>v)?!0:!1}(),isTouch="ontouchstart"in window||navigator.msMaxTouchPoints>0,testNumber=function(num){return"Number"==typeof num?isNaN(num)?null:num:(num=parseFloat(num),isNaN(num)?null:num)},methods={init:function(options){var baseHTML='<span class="irs"><span class="irs-line"><span class="irs-line-left"></span><span class="irs-line-mid"></span><span class="irs-line-right"></span></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span>',singleHTML='<span class="irs-slider single"></span>',doubleHTML='<span class="irs-diapason"></span><span class="irs-slider from"></span><span class="irs-slider to"></span>',disableHTML='<span class="irs-disable-mask"></span>';return this.each(function(){var settings=$.extend({min:null,max:null,from:null,to:null,type:"single",step:null,prefix:"",postfix:"",maxPostfix:"",hasGrid:!1,hideMinMax:!1,hideFromTo:!1,prettify:!0,disable:!1,values:null,onChange:null,onLoad:null,onFinish:null},options),slider=$(this),self=this,allow_values=!1,value_array=null;if(!slider.data("isActive")){slider.data("isActive",!0),pluginCount+=1,this.pluginCount=pluginCount,slider.prop("value")&&(value_array=slider.prop("value").split(";")),"single"===settings.type?value_array&&value_array.length>1?("number"!=typeof settings.min?settings.min=parseFloat(value_array[0]):"number"!=typeof settings.from&&(settings.from=parseFloat(value_array[0])),"number"!=typeof settings.max&&(settings.max=parseFloat(value_array[1]))):value_array&&1===value_array.length&&"number"!=typeof settings.from&&(settings.from=parseFloat(value_array[0])):"double"===settings.type&&(value_array&&value_array.length>1?("number"!=typeof settings.min?settings.min=parseFloat(value_array[0]):"number"!=typeof settings.from&&(settings.from=parseFloat(value_array[0])),"number"!=typeof settings.max?settings.max=parseFloat(value_array[1]):"number"!=typeof settings.to&&(settings.to=parseFloat(value_array[1]))):value_array&&1===value_array.length&&("number"!=typeof settings.min?settings.min=parseFloat(value_array[0]):"number"!=typeof settings.from&&(settings.from=parseFloat(value_array[0])))),"number"==typeof slider.data("min")&&(settings.min=parseFloat(slider.data("min"))),"number"==typeof slider.data("max")&&(settings.max=parseFloat(slider.data("max"))),"number"==typeof slider.data("from")&&(settings.from=parseFloat(slider.data("from"))),"number"==typeof slider.data("to")&&(settings.to=parseFloat(slider.data("to"))),slider.data("step")&&(settings.step=parseFloat(slider.data("step"))),slider.data("type")&&(settings.type=slider.data("type")),slider.data("prefix")&&(settings.prefix=slider.data("prefix")),slider.data("postfix")&&(settings.postfix=slider.data("postfix")),slider.data("maxpostfix")&&(settings.maxPostfix=slider.data("maxpostfix")),slider.data("hasgrid")&&(settings.hasGrid=slider.data("hasgrid")),slider.data("hideminmax")&&(settings.hideMinMax=slider.data("hideminmax")),slider.data("hidefromto")&&(settings.hideFromTo=slider.data("hidefromto")),slider.data("prettify")&&(settings.prettify=slider.data("prettify")),slider.data("disable")&&(settings.disable=slider.data("disable")),slider.data("values")&&(settings.values=slider.data("values").split(",")),settings.min=testNumber(settings.min),settings.min||0===settings.min||(settings.min=10),settings.max=testNumber(settings.max),settings.max||0===settings.max||(settings.max=100),"[object Array]"!==Object.prototype.toString.call(settings.values)&&(settings.values=null),settings.values&&settings.values.length>0&&(settings.min=0,settings.max=settings.values.length-1,settings.step=1,allow_values=!0),settings.from=testNumber(settings.from),settings.from||0===settings.from||(settings.from=settings.min),settings.to=testNumber(settings.to),settings.to||0===settings.to||(settings.to=settings.max),settings.step=testNumber(settings.step),settings.step||(settings.step=1),settings.from<settings.min&&(settings.from=settings.min),settings.from>settings.max&&(settings.from=settings.min),settings.to<settings.min&&(settings.to=settings.max),settings.to>settings.max&&(settings.to=settings.max),"double"===settings.type&&(settings.from>settings.to&&(settings.from=settings.to),settings.to<settings.from&&(settings.to=settings.from));var prettify=function(num){var n=num.toString();return settings.prettify&&(n=n.replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1 ")),n},containerHTML='<span class="irs" id="irs-'+this.pluginCount+'"></span>';slider[0].style.display="none",slider.before(containerHTML);var $rangeSlider,$fieldMin,$fieldMax,$fieldFrom,$fieldTo,$fieldSingle,$singleSlider,$fromSlider,$toSlider,$activeSlider,$diapason,$grid,$container=slider.prev(),$body=$(document.body),$window=$(window),allowDrag=!1,sliderIsActive=!1,firstStart=!0,numbers={},mouseX=0,fieldMinWidth=0,fieldMaxWidth=0,normalWidth=0,fullWidth=0,sliderWidth=0,width=0,left=0,right=0,minusX=0,stepFloat=0;parseInt(settings.step,10)!==parseFloat(settings.step)&&(stepFloat=settings.step.toString().split(".")[1],stepFloat=Math.pow(10,stepFloat.length)),this.updateData=function(options){firstStart=!0,settings=$.extend(settings,options),removeHTML()},this.removeSlider=function(){$container.find("*").off(),$window.off("mouseup.irs"+self.pluginCount),$body.off("mouseup.irs"+self.pluginCount),$body.off("mousemove.irs"+self.pluginCount),$container.html("").remove(),slider.data("isActive",!1),slider.show()};var removeHTML=function(){$container.find("*").off(),$window.off("mouseup.irs"+self.pluginCount),$body.off("mouseup.irs"+self.pluginCount),$body.off("mousemove.irs"+self.pluginCount),$container.html(""),placeHTML()},placeHTML=function(){$container.html(baseHTML),$rangeSlider=$container.find(".irs"),$fieldMin=$rangeSlider.find(".irs-min"),$fieldMax=$rangeSlider.find(".irs-max"),$fieldFrom=$rangeSlider.find(".irs-from"),$fieldTo=$rangeSlider.find(".irs-to"),$fieldSingle=$rangeSlider.find(".irs-single"),$grid=$container.find(".irs-grid"),settings.hideMinMax&&($fieldMin[0].style.display="none",$fieldMax[0].style.display="none",fieldMinWidth=0,fieldMaxWidth=0),settings.hideFromTo&&($fieldFrom[0].style.display="none",$fieldTo[0].style.display="none",$fieldSingle[0].style.display="none"),settings.hideMinMax||(settings.values?($fieldMin.html(settings.prefix+settings.values[0]+settings.postfix),$fieldMax.html(settings.prefix+settings.values[settings.values.length-1]+settings.maxPostfix+settings.postfix)):($fieldMin.html(settings.prefix+prettify(settings.min)+settings.postfix),$fieldMax.html(settings.prefix+prettify(settings.max)+settings.maxPostfix+settings.postfix)),fieldMinWidth=$fieldMin.outerWidth(),fieldMaxWidth=$fieldMax.outerWidth()),"single"===settings.type?($rangeSlider.append(singleHTML),$singleSlider=$rangeSlider.find(".single"),$singleSlider.on("mousedown",function(e){e.preventDefault(),e.stopPropagation(),calcDimensions(e,$(this),null),allowDrag=!0,sliderIsActive=!0,current=self.pluginCount,isOldie&&$("*").prop("unselectable",!0)}),isTouch&&$singleSlider.on("touchstart",function(e){e.preventDefault(),e.stopPropagation(),calcDimensions(e.originalEvent.touches[0],$(this),null),allowDrag=!0,sliderIsActive=!0,current=self.pluginCount})):"double"===settings.type&&($rangeSlider.append(doubleHTML),$fromSlider=$rangeSlider.find(".from"),$toSlider=$rangeSlider.find(".to"),$diapason=$rangeSlider.find(".irs-diapason"),setDiapason(),$fromSlider.on("mousedown",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("last"),$toSlider.removeClass("last"),calcDimensions(e,$(this),"from"),allowDrag=!0,sliderIsActive=!0,current=self.pluginCount,isOldie&&$("*").prop("unselectable",!0)}),$toSlider.on("mousedown",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("last"),$fromSlider.removeClass("last"),calcDimensions(e,$(this),"to"),allowDrag=!0,sliderIsActive=!0,current=self.pluginCount,isOldie&&$("*").prop("unselectable",!0)}),isTouch&&($fromSlider.on("touchstart",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("last"),$toSlider.removeClass("last"),calcDimensions(e.originalEvent.touches[0],$(this),"from"),allowDrag=!0,sliderIsActive=!0,current=self.pluginCount}),$toSlider.on("touchstart",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("last"),$fromSlider.removeClass("last"),calcDimensions(e.originalEvent.touches[0],$(this),"to"),allowDrag=!0,sliderIsActive=!0,current=self.pluginCount})),settings.to===settings.max&&$fromSlider.addClass("last"));var mouseup=function(){current===self.pluginCount&&allowDrag&&(sliderIsActive=!1,allowDrag=!1,$activeSlider.removeAttr("id"),$activeSlider=null,"double"===settings.type&&setDiapason(),getNumbers(),isOldie&&$("*").prop("unselectable",!1))};$window.on("mouseup.irs"+self.pluginCount,function(){mouseup()}),$body.on("mousemove.irs"+self.pluginCount,function(e){allowDrag&&(mouseX=e.pageX,dragSlider())}),$container.on("mousedown",function(){current=self.pluginCount}),$container.on("mouseup",function(e){current===self.pluginCount&&(allowDrag||settings.disable||moveByClick(e.pageX))}),isTouch&&($window.on("touchend",function(){allowDrag&&(sliderIsActive=!1,allowDrag=!1,$activeSlider.removeAttr("id"),$activeSlider=null,"double"===settings.type&&setDiapason(),getNumbers())}),$window.on("touchmove",function(e){allowDrag&&(mouseX=e.originalEvent.touches[0].pageX,dragSlider())})),getSize(),setNumbers(),settings.hasGrid&&setGrid(),settings.disable?setMask():removeMask()},getSize=function(){normalWidth=$rangeSlider.width(),sliderWidth=$singleSlider?$singleSlider.width():$fromSlider.width(),fullWidth=normalWidth-sliderWidth},calcDimensions=function(e,currentSlider,whichSlider){getSize(),firstStart=!1,$activeSlider=currentSlider,$activeSlider.attr("id","irs-active-slider");var _x1=$activeSlider.offset().left,_x2=e.pageX-_x1;minusX=_x1+_x2-$activeSlider.position().left,"single"===settings.type?width=$rangeSlider.width()-sliderWidth:"double"===settings.type&&("from"===whichSlider?(left=0,right=parseInt($toSlider.css("left"),10)):(left=parseInt($fromSlider.css("left"),10),right=$rangeSlider.width()-sliderWidth))},setDiapason=function(){var _w=$fromSlider.width(),_x=$.data($fromSlider[0],"x")||parseInt($fromSlider[0].style.left,10)||$fromSlider.position().left,_width=$.data($toSlider[0],"x")||parseInt($toSlider[0].style.left,10)||$toSlider.position().left,x=_x+_w/2,w=_width-_x;$diapason[0].style.left=x+"px",$diapason[0].style.width=w+"px"},dragSlider=function(manual_x){var x,x_pure=mouseX-minusX;x_pure=manual_x?manual_x:mouseX-minusX,"single"===settings.type?(0>x_pure&&(x_pure=0),x_pure>width&&(x_pure=width)):"double"===settings.type&&(left>x_pure&&(x_pure=left),x_pure>right&&(x_pure=right),setDiapason()),$.data($activeSlider[0],"x",x_pure),getNumbers(),x=Math.round(x_pure),$activeSlider[0].style.left=x+"px"},getNumbers=function(){var _from,_to,nums={input:slider,slider:$container,min:settings.min,max:settings.max,fromNumber:0,toNumber:0,fromPers:0,toPers:0,fromX:0,fromX_pure:0,toX:0,toX_pure:0},diapason=settings.max-settings.min;"single"===settings.type?(nums.fromX=$.data($singleSlider[0],"x")||parseInt($singleSlider[0].style.left,10)||$singleSlider.position().left,nums.fromPers=nums.fromX/fullWidth*100,_from=diapason/100*nums.fromPers+settings.min,nums.fromNumber=Math.round(_from/settings.step)*settings.step,nums.fromNumber<settings.min&&(nums.fromNumber=settings.min),nums.fromNumber>settings.max&&(nums.fromNumber=settings.max),stepFloat&&(nums.fromNumber=parseInt(nums.fromNumber*stepFloat,10)/stepFloat),allow_values&&(nums.fromValue=settings.values[nums.fromNumber])):"double"===settings.type&&(nums.fromX=$.data($fromSlider[0],"x")||parseInt($fromSlider[0].style.left,10)||$fromSlider.position().left,nums.fromPers=nums.fromX/fullWidth*100,_from=diapason/100*nums.fromPers+settings.min,nums.fromNumber=Math.round(_from/settings.step)*settings.step,nums.fromNumber<settings.min&&(nums.fromNumber=settings.min),nums.toX=$.data($toSlider[0],"x")||parseInt($toSlider[0].style.left,10)||$toSlider.position().left,nums.toPers=nums.toX/fullWidth*100,_to=diapason/100*nums.toPers+settings.min,nums.toNumber=Math.round(_to/settings.step)*settings.step,nums.toNumber>settings.max&&(nums.toNumber=settings.max),stepFloat&&(nums.fromNumber=parseInt(nums.fromNumber*stepFloat,10)/stepFloat,nums.toNumber=parseInt(nums.toNumber*stepFloat,10)/stepFloat),allow_values&&(nums.fromValue=settings.values[nums.fromNumber],nums.toValue=settings.values[nums.toNumber])),numbers=nums,setFields()},setNumbers=function(){var nums={input:slider,slider:$container,min:settings.min,max:settings.max,fromNumber:settings.from,toNumber:settings.to,fromPers:0,toPers:0,fromX:0,fromX_pure:0,toX:0,toX_pure:0},diapason=settings.max-settings.min;"single"===settings.type?(nums.fromPers=0!==diapason?(nums.fromNumber-settings.min)/diapason*100:0,nums.fromX_pure=fullWidth/100*nums.fromPers,nums.fromX=Math.round(nums.fromX_pure),$singleSlider[0].style.left=nums.fromX+"px",$.data($singleSlider[0],"x",nums.fromX_pure)):"double"===settings.type&&(nums.fromPers=0!==diapason?(nums.fromNumber-settings.min)/diapason*100:0,nums.fromX_pure=fullWidth/100*nums.fromPers,nums.fromX=Math.round(nums.fromX_pure),$fromSlider[0].style.left=nums.fromX+"px",$.data($fromSlider[0],"x",nums.fromX_pure),nums.toPers=0!==diapason?(nums.toNumber-settings.min)/diapason*100:1,nums.toX_pure=fullWidth/100*nums.toPers,nums.toX=Math.round(nums.toX_pure),$toSlider[0].style.left=nums.toX+"px",$.data($toSlider[0],"x",nums.toX_pure),setDiapason()),numbers=nums,setFields()},moveByClick=function(page_x){var x=page_x-$container.offset().left,d=numbers.toX-numbers.fromX,zero_point=numbers.fromX+d/2;left=0,width=$rangeSlider.width()-sliderWidth,right=$rangeSlider.width()-sliderWidth,"single"===settings.type?($activeSlider=$singleSlider,$activeSlider.attr("id","irs-active-slider"),dragSlider(x)):"double"===settings.type&&($activeSlider=zero_point>=x?$fromSlider:$toSlider,$activeSlider.attr("id","irs-active-slider"),dragSlider(x),setDiapason()),$activeSlider.removeAttr("id"),$activeSlider=null},setFields=function(){var _from,_fromW,_fromX,_to,_toW,_toX,_single,_singleW,_singleX,_slW=sliderWidth/2,maxPostfix="";"single"===settings.type?(maxPostfix=numbers.fromNumber===settings.max?settings.maxPostfix:"",settings.hideText||($fieldFrom[0].style.display="none",$fieldTo[0].style.display="none",_single=allow_values?settings.prefix+settings.values[numbers.fromNumber]+maxPostfix+settings.postfix:settings.prefix+prettify(numbers.fromNumber)+maxPostfix+settings.postfix,$fieldSingle.html(_single),_singleW=$fieldSingle.outerWidth(),_singleX=numbers.fromX-_singleW/2+_slW,0>_singleX&&(_singleX=0),_singleX>normalWidth-_singleW&&(_singleX=normalWidth-_singleW),$fieldSingle[0].style.left=_singleX+"px",settings.hideMinMax||settings.hideFromTo||($fieldMin[0].style.display=fieldMinWidth>_singleX?"none":"block",$fieldMax[0].style.display=_singleX+_singleW>normalWidth-fieldMaxWidth?"none":"block")),slider.attr("value",parseFloat(numbers.fromNumber))):"double"===settings.type&&(maxPostfix=numbers.fromNumber===settings.max?settings.maxPostfix:"",maxPostfix=numbers.toNumber===settings.max?settings.maxPostfix:"",settings.hideText||(allow_values?(_from=settings.prefix+settings.values[numbers.fromNumber]+settings.postfix,_to=settings.prefix+settings.values[numbers.toNumber]+maxPostfix+settings.postfix,_single=numbers.fromNumber!==numbers.toNumber?settings.prefix+settings.values[numbers.fromNumber]+" — "+settings.prefix+settings.values[numbers.toNumber]+maxPostfix+settings.postfix:settings.prefix+settings.values[numbers.fromNumber]+maxPostfix+settings.postfix):(_from=settings.prefix+prettify(numbers.fromNumber)+settings.postfix,_to=settings.prefix+prettify(numbers.toNumber)+maxPostfix+settings.postfix,_single=numbers.fromNumber!==numbers.toNumber?settings.prefix+prettify(numbers.fromNumber)+" — "+settings.prefix+prettify(numbers.toNumber)+maxPostfix+settings.postfix:settings.prefix+prettify(numbers.fromNumber)+maxPostfix+settings.postfix),$fieldFrom.html(_from),$fieldTo.html(_to),$fieldSingle.html(_single),_fromW=$fieldFrom.outerWidth(),_fromX=numbers.fromX-_fromW/2+_slW,0>_fromX&&(_fromX=0),_fromX>normalWidth-_fromW&&(_fromX=normalWidth-_fromW),$fieldFrom[0].style.left=_fromX+"px",_toW=$fieldTo.outerWidth(),_toX=numbers.toX-_toW/2+_slW,0>_toX&&(_toX=0),_toX>normalWidth-_toW&&(_toX=normalWidth-_toW),$fieldTo[0].style.left=_toX+"px",_singleW=$fieldSingle.outerWidth(),_singleX=numbers.fromX+(numbers.toX-numbers.fromX)/2-_singleW/2+_slW,0>_singleX&&(_singleX=0),_singleX>normalWidth-_singleW&&(_singleX=normalWidth-_singleW),$fieldSingle[0].style.left=_singleX+"px",_toX>_fromX+_fromW?($fieldSingle[0].style.display="none",$fieldFrom[0].style.display="block",$fieldTo[0].style.display="block"):($fieldSingle[0].style.display="block",$fieldFrom[0].style.display="none",$fieldTo[0].style.display="none"),settings.hideMinMax||settings.hideFromTo||($fieldMin[0].style.display=fieldMinWidth>_singleX||fieldMinWidth>_fromX?"none":"block",$fieldMax[0].style.display=_singleX+_singleW>normalWidth-fieldMaxWidth||_toX+_toW>normalWidth-fieldMaxWidth?"none":"block")),slider.attr("value",parseFloat(numbers.fromNumber)+";"+parseFloat(numbers.toNumber))),"function"!=typeof settings.onFinish||sliderIsActive||firstStart||settings.onFinish.call(this,numbers),"function"!=typeof settings.onChange||firstStart||settings.onChange.call(this,numbers),"function"==typeof settings.onLoad&&!sliderIsActive&&firstStart&&(settings.onLoad.call(this,numbers),firstStart=!1)},setGrid=function(){$container.addClass("irs-with-grid");var i,text="",step=0,tStep=0,gridHTML="",smNum=20,bigNum=4;for(i=0;smNum>=i;i+=1)step=Math.floor(normalWidth/smNum*i),step>=normalWidth&&(step=normalWidth-1),gridHTML+='<span class="irs-grid-pol small" style="left: '+step+'px;"></span>';for(i=0;bigNum>=i;i+=1)step=Math.floor(normalWidth/bigNum*i),step>=normalWidth&&(step=normalWidth-1),gridHTML+='<span class="irs-grid-pol" style="left: '+step+'px;"></span>',stepFloat?(text=settings.min+(settings.max-settings.min)/bigNum*i,text=text/settings.step*settings.step,text=parseInt(text*stepFloat,10)/stepFloat):(text=Math.round(settings.min+(settings.max-settings.min)/bigNum*i),text=Math.round(text/settings.step)*settings.step,text=prettify(text)),allow_values&&(settings.hideMinMax?(text=Math.round(settings.min+(settings.max-settings.min)/bigNum*i),text=Math.round(text/settings.step)*settings.step,text=0===i||i===bigNum?settings.values[text]:""):text=""),0===i?(tStep=step,gridHTML+='<span class="irs-grid-text" style="left: '+tStep+'px; text-align: left;">'+text+"</span>"):i===bigNum?(tStep=step-100,gridHTML+='<span class="irs-grid-text" style="left: '+tStep+'px; text-align: right;">'+text+"</span>"):(tStep=step-50,gridHTML+='<span class="irs-grid-text" style="left: '+tStep+'px;">'+text+"</span>");$grid.html(gridHTML)},setMask=function(){$container.addClass("irs-disabled"),$container.append(disableHTML)},removeMask=function(){$container.removeClass("irs-disabled"),$container.find(".irs-disable-mask").remove()};placeHTML()}})},update:function(options){return this.each(function(){this.updateData(options)})},remove:function(){return this.each(function(){this.removeSlider()})}};$.fn.ionRangeSlider=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist for jQuery.ionRangeSlider"):methods.init.apply(this,arguments)}}(jQuery,document,window,navigator);