!function($,undefined){function setDefaults(d){$.extend(!0,defaults,d)}function Calendar(element,options,eventSources){function render(inc){content?elementVisible()&&(calcSize(),_renderView(inc)):initialRender()}function initialRender(){tm=options.theme?"ui":"fc",element.addClass("fc"),element.addClass(options.isRTL?"fc-rtl":"fc-ltr"),options.theme&&element.addClass("ui-widget"),content=$("<div class='fc-content' style='position:relative'/>").prependTo(element),header=new Header(t,options),headerElement=header.render(),headerElement&&element.prepend(headerElement),changeView(options.defaultView),options.handleWindowResize&&$(window).resize(windowResize),bodyVisible()||lateRender()}function lateRender(){setTimeout(function(){!currentView.start&&bodyVisible()&&renderView()},0)}function destroy(){currentView&&(trigger("viewDestroy",currentView,currentView,currentView.element),currentView.triggerEventDestroy()),$(window).unbind("resize",windowResize),header.destroy(),content.remove(),element.removeClass("fc fc-rtl ui-widget")}function elementVisible(){return element.is(":visible")}function bodyVisible(){return $("body").is(":visible")}function changeView(newViewName){currentView&&newViewName==currentView.name||_changeView(newViewName)}function _changeView(newViewName){ignoreWindowResize++,currentView&&(trigger("viewDestroy",currentView,currentView,currentView.element),unselect(),currentView.triggerEventDestroy(),freezeContentHeight(),currentView.element.remove(),header.deactivateButton(currentView.name)),header.activateButton(newViewName),currentView=new fcViews[newViewName]($("<div class='fc-view fc-view-"+newViewName+"' style='position:relative'/>").appendTo(content),t),renderView(),unfreezeContentHeight(),ignoreWindowResize--}function renderView(inc){(!currentView.start||inc||date<currentView.start||date>=currentView.end)&&elementVisible()&&_renderView(inc)}function _renderView(inc){ignoreWindowResize++,currentView.start&&(trigger("viewDestroy",currentView,currentView,currentView.element),unselect(),clearEvents()),freezeContentHeight(),currentView.render(date,inc||0),setSize(),unfreezeContentHeight(),(currentView.afterRender||noop)(),updateTitle(),updateTodayButton(),trigger("viewRender",currentView,currentView,currentView.element),currentView.trigger("viewDisplay",_element),ignoreWindowResize--,getAndRenderEvents()}function updateSize(){elementVisible()&&(unselect(),clearEvents(),calcSize(),setSize(),renderEvents())}function calcSize(){suggestedViewHeight=options.contentHeight?options.contentHeight:options.height?options.height-(headerElement?headerElement.height():0)-vsides(content):Math.round(content.width()/Math.max(options.aspectRatio,.5))}function setSize(){suggestedViewHeight===undefined&&calcSize(),ignoreWindowResize++,currentView.setHeight(suggestedViewHeight),currentView.setWidth(content.width()),ignoreWindowResize--,elementOuterWidth=element.outerWidth()}function windowResize(){if(!ignoreWindowResize)if(currentView.start){var uid=++resizeUID;setTimeout(function(){uid==resizeUID&&!ignoreWindowResize&&elementVisible()&&elementOuterWidth!=(elementOuterWidth=element.outerWidth())&&(ignoreWindowResize++,updateSize(),currentView.trigger("windowResize",_element),ignoreWindowResize--)},200)}else lateRender()}function refetchEvents(){clearEvents(),fetchAndRenderEvents()}function rerenderEvents(modifiedEventID){clearEvents(),renderEvents(modifiedEventID)}function renderEvents(modifiedEventID){elementVisible()&&(currentView.setEventData(events),currentView.renderEvents(events,modifiedEventID),currentView.trigger("eventAfterAllRender"))}function clearEvents(){currentView.triggerEventDestroy(),currentView.clearEvents(),currentView.clearEventData()}function getAndRenderEvents(){!options.lazyFetching||isFetchNeeded(currentView.visStart,currentView.visEnd)?fetchAndRenderEvents():renderEvents()}function fetchAndRenderEvents(){fetchEvents(currentView.visStart,currentView.visEnd)}function reportEvents(_events){events=_events,renderEvents()}function reportEventChange(eventID){rerenderEvents(eventID)}function updateTitle(){header.updateTitle(currentView.title)}function updateTodayButton(){var today=new Date;today>=currentView.start&&today<currentView.end?header.disableButton("today"):header.enableButton("today")}function select(start,end,allDay){currentView.select(start,end,allDay===undefined?!0:allDay)}function unselect(){currentView&&currentView.unselect()}function prev(){renderView(-1)}function next(){renderView(1)}function prevYear(){addYears(date,-1),renderView()}function nextYear(){addYears(date,1),renderView()}function today(){date=new Date,renderView()}function gotoDate(year,month,dateOfMonth){year instanceof Date?date=cloneDate(year):setYMD(date,year,month,dateOfMonth),renderView()}function incrementDate(years,months,days){years!==undefined&&addYears(date,years),months!==undefined&&addMonths(date,months),days!==undefined&&addDays(date,days),renderView()}function getDate(){return cloneDate(date)}function freezeContentHeight(){content.css({width:"100%",height:content.height(),overflow:"hidden"})}function unfreezeContentHeight(){content.css({width:"",height:"",overflow:""})}function getView(){return currentView}function option(name,value){return value===undefined?options[name]:void(("height"==name||"contentHeight"==name||"aspectRatio"==name)&&(options[name]=value,updateSize()))}function trigger(name,thisObj){return options[name]?options[name].apply(thisObj||_element,Array.prototype.slice.call(arguments,2)):void 0}var t=this;t.options=options,t.render=render,t.destroy=destroy,t.refetchEvents=refetchEvents,t.reportEvents=reportEvents,t.reportEventChange=reportEventChange,t.rerenderEvents=rerenderEvents,t.changeView=changeView,t.select=select,t.unselect=unselect,t.prev=prev,t.next=next,t.prevYear=prevYear,t.nextYear=nextYear,t.today=today,t.gotoDate=gotoDate,t.incrementDate=incrementDate,t.formatDate=function(format,date){return formatDate(format,date,options)},t.formatDates=function(format,date1,date2){return formatDates(format,date1,date2,options)},t.getDate=getDate,t.getView=getView,t.option=option,t.trigger=trigger,EventManager.call(t,options,eventSources);var header,headerElement,content,tm,currentView,elementOuterWidth,suggestedViewHeight,_dragElement,isFetchNeeded=t.isFetchNeeded,fetchEvents=t.fetchEvents,_element=element[0],resizeUID=0,ignoreWindowResize=0,date=new Date,events=[];setYMD(date,options.year,options.month,options.date),options.droppable&&$(document).bind("dragstart",function(ev,ui){var _e=ev.target,e=$(_e);if(!e.parents(".fc").length){var accept=options.dropAccept;($.isFunction(accept)?accept.call(_e,e):e.is(accept))&&(_dragElement=_e,currentView.dragStart(_dragElement,ev,ui))}}).bind("dragstop",function(ev,ui){_dragElement&&(currentView.dragStop(_dragElement,ev,ui),_dragElement=null)})}function Header(calendar,options){function render(){tm=options.theme?"ui":"fc";var sections=options.header;return sections?element=$("<table class='fc-header' style='width:100%'/>").append($("<tr/>").append(renderSection("left")).append(renderSection("center")).append(renderSection("right"))):void 0}function destroy(){element.remove()}function renderSection(position){var e=$("<td class='fc-header-"+position+"'/>"),buttonStr=options.header[position];return buttonStr&&$.each(buttonStr.split(" "),function(i){i>0&&e.append("<span class='fc-header-space'/>");var prevButton;$.each(this.split(","),function(j,buttonName){if("title"==buttonName)e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),prevButton&&prevButton.addClass(tm+"-corner-right"),prevButton=null;else{var buttonClick;if(calendar[buttonName]?buttonClick=calendar[buttonName]:fcViews[buttonName]&&(buttonClick=function(){button.removeClass(tm+"-state-hover"),calendar.changeView(buttonName)}),buttonClick){var icon=options.theme?smartProperty(options.buttonIcons,buttonName):null,text=smartProperty(options.buttonText,buttonName),button=$("<span class='fc-button fc-button-"+buttonName+" "+tm+"-state-default'>"+(icon?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+icon+"'/></span>":text)+"</span>").click(function(){button.hasClass(tm+"-state-disabled")||buttonClick()}).mousedown(function(){button.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-down")}).mouseup(function(){button.removeClass(tm+"-state-down")}).hover(function(){button.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-hover")},function(){button.removeClass(tm+"-state-hover").removeClass(tm+"-state-down")}).appendTo(e);disableTextSelection(button),prevButton||button.addClass(tm+"-corner-left"),prevButton=button}}}),prevButton&&prevButton.addClass(tm+"-corner-right")}),e}function updateTitle(html){element.find("h2").html(html)}function activateButton(buttonName){element.find("span.fc-button-"+buttonName).addClass(tm+"-state-active")}function deactivateButton(buttonName){element.find("span.fc-button-"+buttonName).removeClass(tm+"-state-active")}function disableButton(buttonName){element.find("span.fc-button-"+buttonName).addClass(tm+"-state-disabled")}function enableButton(buttonName){element.find("span.fc-button-"+buttonName).removeClass(tm+"-state-disabled")}var t=this;t.render=render,t.destroy=destroy,t.updateTitle=updateTitle,t.activateButton=activateButton,t.deactivateButton=deactivateButton,t.disableButton=disableButton,t.enableButton=enableButton;var tm,element=$([])}function EventManager(options,_sources){function isFetchNeeded(start,end){return!rangeStart||rangeStart>start||end>rangeEnd}function fetchEvents(start,end){rangeStart=start,rangeEnd=end,cache=[];var fetchID=++currentFetchID,len=sources.length;pendingSourceCnt=len;for(var i=0;len>i;i++)fetchEventSource(sources[i],fetchID)}function fetchEventSource(source,fetchID){_fetchEventSource(source,function(events){if(fetchID==currentFetchID){if(events){options.eventDataTransform&&(events=$.map(events,options.eventDataTransform)),source.eventDataTransform&&(events=$.map(events,source.eventDataTransform));for(var i=0;i<events.length;i++)events[i].source=source,normalizeEvent(events[i]);cache=cache.concat(events)}pendingSourceCnt--,pendingSourceCnt||reportEvents(cache)}})}function _fetchEventSource(source,callback){var i,res,fetchers=fc.sourceFetchers;for(i=0;i<fetchers.length;i++){if(res=fetchers[i](source,rangeStart,rangeEnd,callback),res===!0)return;if("object"==typeof res)return void _fetchEventSource(res,callback)}var events=source.events;if(events)$.isFunction(events)?(pushLoading(),events(cloneDate(rangeStart),cloneDate(rangeEnd),function(events){callback(events),popLoading()})):$.isArray(events)?callback(events):callback();else{var url=source.url;if(url){var customData,success=source.success,error=source.error,complete=source.complete;customData=$.isFunction(source.data)?source.data():source.data;var data=$.extend({},customData||{}),startParam=firstDefined(source.startParam,options.startParam),endParam=firstDefined(source.endParam,options.endParam);startParam&&(data[startParam]=Math.round(+rangeStart/1e3)),endParam&&(data[endParam]=Math.round(+rangeEnd/1e3)),pushLoading(),$.ajax($.extend({},ajaxDefaults,source,{data:data,success:function(events){events=events||[];var res=applyAll(success,this,arguments);$.isArray(res)&&(events=res),callback(events)},error:function(){applyAll(error,this,arguments),callback()},complete:function(){applyAll(complete,this,arguments),popLoading()}}))}else callback()}}function addEventSource(source){source=_addEventSource(source),source&&(pendingSourceCnt++,fetchEventSource(source,currentFetchID))}function _addEventSource(source){return $.isFunction(source)||$.isArray(source)?source={events:source}:"string"==typeof source&&(source={url:source}),"object"==typeof source?(normalizeSource(source),sources.push(source),source):void 0}function removeEventSource(source){sources=$.grep(sources,function(src){return!isSourcesEqual(src,source)}),cache=$.grep(cache,function(e){return!isSourcesEqual(e.source,source)}),reportEvents(cache)}function updateEvent(event){var i,e,len=cache.length,defaultEventEnd=getView().defaultEventEnd,startDelta=event.start-event._start,endDelta=event.end?event.end-(event._end||defaultEventEnd(event)):0;for(i=0;len>i;i++)e=cache[i],e._id==event._id&&e!=event&&(e.start=new Date(+e.start+startDelta),e.end=event.end?new Date(e.end?+e.end+endDelta:+defaultEventEnd(e)+endDelta):null,e.title=event.title,e.url=event.url,e.allDay=event.allDay,e.className=event.className,e.editable=event.editable,e.color=event.color,e.backgroundColor=event.backgroundColor,e.borderColor=event.borderColor,e.textColor=event.textColor,normalizeEvent(e));normalizeEvent(event),reportEvents(cache)}function renderEvent(event,stick){normalizeEvent(event),event.source||(stick&&(stickySource.events.push(event),event.source=stickySource),cache.push(event)),reportEvents(cache)}function removeEvents(filter){if(filter){if(!$.isFunction(filter)){var id=filter+"";filter=function(e){return e._id==id}}cache=$.grep(cache,filter,!0);for(var i=0;i<sources.length;i++)$.isArray(sources[i].events)&&(sources[i].events=$.grep(sources[i].events,filter,!0))}else{cache=[];for(var i=0;i<sources.length;i++)$.isArray(sources[i].events)&&(sources[i].events=[])}reportEvents(cache)}function clientEvents(filter){return $.isFunction(filter)?$.grep(cache,filter):filter?(filter+="",$.grep(cache,function(e){return e._id==filter})):cache}function pushLoading(){loadingLevel++||trigger("loading",null,!0,getView())}function popLoading(){--loadingLevel||trigger("loading",null,!1,getView())}function normalizeEvent(event){var source=event.source||{},ignoreTimezone=firstDefined(source.ignoreTimezone,options.ignoreTimezone);event._id=event._id||(event.id===undefined?"_fc"+eventGUID++:event.id+""),event.date&&(event.start||(event.start=event.date),delete event.date),event._start=cloneDate(event.start=parseDate(event.start,ignoreTimezone)),event.end=parseDate(event.end,ignoreTimezone),event.end&&event.end<=event.start&&(event.end=null),event._end=event.end?cloneDate(event.end):null,event.allDay===undefined&&(event.allDay=firstDefined(source.allDayDefault,options.allDayDefault)),event.className?"string"==typeof event.className&&(event.className=event.className.split(/\s+/)):event.className=[]}function normalizeSource(source){source.className?"string"==typeof source.className&&(source.className=source.className.split(/\s+/)):source.className=[];for(var normalizers=fc.sourceNormalizers,i=0;i<normalizers.length;i++)normalizers[i](source)}function isSourcesEqual(source1,source2){return source1&&source2&&getSourcePrimitive(source1)==getSourcePrimitive(source2)}function getSourcePrimitive(source){return("object"==typeof source?source.events||source.url:"")||source}var t=this;t.isFetchNeeded=isFetchNeeded,t.fetchEvents=fetchEvents,t.addEventSource=addEventSource,t.removeEventSource=removeEventSource,t.updateEvent=updateEvent,t.renderEvent=renderEvent,t.removeEvents=removeEvents,t.clientEvents=clientEvents,t.normalizeEvent=normalizeEvent;for(var rangeStart,rangeEnd,trigger=t.trigger,getView=t.getView,reportEvents=t.reportEvents,stickySource={events:[]},sources=[stickySource],currentFetchID=0,pendingSourceCnt=0,loadingLevel=0,cache=[],i=0;i<_sources.length;i++)_addEventSource(_sources[i])}function addYears(d,n,keepTime){return d.setFullYear(d.getFullYear()+n),keepTime||clearTime(d),d}function addMonths(d,n,keepTime){if(+d){var m=d.getMonth()+n,check=cloneDate(d);for(check.setDate(1),check.setMonth(m),d.setMonth(m),keepTime||clearTime(d);d.getMonth()!=check.getMonth();)d.setDate(d.getDate()+(check>d?1:-1))}return d}function addDays(d,n,keepTime){if(+d){var dd=d.getDate()+n,check=cloneDate(d);check.setHours(9),check.setDate(dd),d.setDate(dd),keepTime||clearTime(d),fixDate(d,check)}return d}function fixDate(d,check){if(+d)for(;d.getDate()!=check.getDate();)d.setTime(+d+(check>d?1:-1)*HOUR_MS)}function addMinutes(d,n){return d.setMinutes(d.getMinutes()+n),d}function clearTime(d){return d.setHours(0),d.setMinutes(0),d.setSeconds(0),d.setMilliseconds(0),d}function cloneDate(d,dontKeepTime){return dontKeepTime?clearTime(new Date(+d)):new Date(+d)}function zeroDate(){var d,i=0;do d=new Date(1970,i++,1);while(d.getHours());return d}function dayDiff(d1,d2){return Math.round((cloneDate(d1,!0)-cloneDate(d2,!0))/DAY_MS)}function setYMD(date,y,m,d){y!==undefined&&y!=date.getFullYear()&&(date.setDate(1),date.setMonth(0),date.setFullYear(y)),m!==undefined&&m!=date.getMonth()&&(date.setDate(1),date.setMonth(m)),d!==undefined&&date.setDate(d)}function parseDate(s,ignoreTimezone){return"object"==typeof s?s:"number"==typeof s?new Date(1e3*s):"string"==typeof s?s.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(s)):(ignoreTimezone===undefined&&(ignoreTimezone=!0),parseISO8601(s,ignoreTimezone)||(s?new Date(s):null)):null}function parseISO8601(s,ignoreTimezone){var m=s.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!m)return null;var date=new Date(m[1],0,1);if(ignoreTimezone||!m[13]){var check=new Date(m[1],0,1,9,0);m[3]&&(date.setMonth(m[3]-1),check.setMonth(m[3]-1)),m[5]&&(date.setDate(m[5]),check.setDate(m[5])),fixDate(date,check),m[7]&&date.setHours(m[7]),m[8]&&date.setMinutes(m[8]),m[10]&&date.setSeconds(m[10]),m[12]&&date.setMilliseconds(1e3*Number("0."+m[12])),fixDate(date,check)}else if(date.setUTCFullYear(m[1],m[3]?m[3]-1:0,m[5]||1),date.setUTCHours(m[7]||0,m[8]||0,m[10]||0,m[12]?1e3*Number("0."+m[12]):0),m[14]){var offset=60*Number(m[16])+(m[18]?Number(m[18]):0);offset*="-"==m[15]?1:-1,date=new Date(+date+60*offset*1e3)}return date}function parseTime(s){if("number"==typeof s)return 60*s;if("object"==typeof s)return 60*s.getHours()+s.getMinutes();var m=s.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(m){var h=parseInt(m[1],10);return m[3]&&(h%=12,"p"==m[3].toLowerCase().charAt(0)&&(h+=12)),60*h+(m[2]?parseInt(m[2],10):0)}}function formatDate(date,format,options){return formatDates(date,null,format,options)}function formatDates(date1,date2,format,options){options=options||defaults;var i,c,i2,formatter,date=date1,otherDate=date2,len=format.length,res="";for(i=0;len>i;i++)if(c=format.charAt(i),"'"==c){for(i2=i+1;len>i2;i2++)if("'"==format.charAt(i2)){date&&(res+=i2==i+1?"'":format.substring(i+1,i2),i=i2);break}}else if("("==c){for(i2=i+1;len>i2;i2++)if(")"==format.charAt(i2)){var subres=formatDate(date,format.substring(i+1,i2),options);parseInt(subres.replace(/\D/,""),10)&&(res+=subres),i=i2;break}}else if("["==c){for(i2=i+1;len>i2;i2++)if("]"==format.charAt(i2)){var subformat=format.substring(i+1,i2),subres=formatDate(date,subformat,options);subres!=formatDate(otherDate,subformat,options)&&(res+=subres),i=i2;break}}else if("{"==c)date=date2,otherDate=date1;else if("}"==c)date=date1,otherDate=date2;else{for(i2=len;i2>i;i2--)if(formatter=dateFormatters[format.substring(i,i2)]){date&&(res+=formatter(date,options)),i=i2-1;break}i2==i&&date&&(res+=c)}return res}function iso8601Week(date){var time,checkDate=new Date(date.getTime());return checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7)),time=checkDate.getTime(),checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1}function exclEndDay(event){return event.end?_exclEndDay(event.end,event.allDay):addDays(cloneDate(event.start),1)}function _exclEndDay(end,allDay){return end=cloneDate(end),allDay||end.getHours()||end.getMinutes()?addDays(end,1):clearTime(end)}function lazySegBind(container,segs,bindHandlers){container.unbind("mouseover").mouseover(function(ev){for(var e,i,seg,parent=ev.target;parent!=this;)e=parent,parent=parent.parentNode;(i=e._fci)!==undefined&&(e._fci=undefined,seg=segs[i],bindHandlers(seg.event,seg.element,seg),$(ev.target).trigger(ev)),ev.stopPropagation()})}function setOuterWidth(element,width,includeMargins){for(var e,i=0;i<element.length;i++)e=$(element[i]),e.width(Math.max(0,width-hsides(e,includeMargins)))}function setOuterHeight(element,height,includeMargins){for(var e,i=0;i<element.length;i++)e=$(element[i]),e.height(Math.max(0,height-vsides(e,includeMargins)))}function hsides(element,includeMargins){return hpadding(element)+hborders(element)+(includeMargins?hmargins(element):0)}function hpadding(element){return(parseFloat($.css(element[0],"paddingLeft",!0))||0)+(parseFloat($.css(element[0],"paddingRight",!0))||0)}function hmargins(element){return(parseFloat($.css(element[0],"marginLeft",!0))||0)+(parseFloat($.css(element[0],"marginRight",!0))||0)}function hborders(element){return(parseFloat($.css(element[0],"borderLeftWidth",!0))||0)+(parseFloat($.css(element[0],"borderRightWidth",!0))||0)}function vsides(element,includeMargins){return vpadding(element)+vborders(element)+(includeMargins?vmargins(element):0)}function vpadding(element){return(parseFloat($.css(element[0],"paddingTop",!0))||0)+(parseFloat($.css(element[0],"paddingBottom",!0))||0)}function vmargins(element){return(parseFloat($.css(element[0],"marginTop",!0))||0)+(parseFloat($.css(element[0],"marginBottom",!0))||0)}function vborders(element){return(parseFloat($.css(element[0],"borderTopWidth",!0))||0)+(parseFloat($.css(element[0],"borderBottomWidth",!0))||0)}function noop(){}function dateCompare(a,b){return a-b}function arrayMax(a){return Math.max.apply(Math,a)}function zeroPad(n){return(10>n?"0":"")+n}function smartProperty(obj,name){if(obj[name]!==undefined)return obj[name];for(var res,parts=name.split(/(?=[A-Z])/),i=parts.length-1;i>=0;i--)if(res=obj[parts[i].toLowerCase()],res!==undefined)return res;return obj[""]}function htmlEscape(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function disableTextSelection(element){element.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function markFirstLast(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function getSkinCss(event,opt){var source=event.source||{},eventColor=event.color,sourceColor=source.color,optionColor=opt("eventColor"),backgroundColor=event.backgroundColor||eventColor||source.backgroundColor||sourceColor||opt("eventBackgroundColor")||optionColor,borderColor=event.borderColor||eventColor||source.borderColor||sourceColor||opt("eventBorderColor")||optionColor,textColor=event.textColor||source.textColor||opt("eventTextColor"),statements=[];return backgroundColor&&statements.push("background-color:"+backgroundColor),borderColor&&statements.push("border-color:"+borderColor),textColor&&statements.push("color:"+textColor),statements.join(";")}function applyAll(functions,thisObj,args){if($.isFunction(functions)&&(functions=[functions]),functions){var i,ret;for(i=0;i<functions.length;i++)ret=functions[i].apply(thisObj,args)||ret;return ret}}function firstDefined(){for(var i=0;i<arguments.length;i++)if(arguments[i]!==undefined)return arguments[i]}function MonthView(element,calendar){function render(date,delta){delta&&(addMonths(date,delta),date.setDate(1));var firstDay=opt("firstDay"),start=cloneDate(date,!0);start.setDate(1);var end=addMonths(cloneDate(start),1),visStart=cloneDate(start);addDays(visStart,-((visStart.getDay()-firstDay+7)%7)),skipHiddenDays(visStart);var visEnd=cloneDate(end);addDays(visEnd,(7-visEnd.getDay()+firstDay)%7),skipHiddenDays(visEnd,-1,!0);var colCnt=getCellsPerWeek(),rowCnt=Math.round(dayDiff(visEnd,visStart)/7);"fixed"==opt("weekMode")&&(addDays(visEnd,7*(6-rowCnt)),rowCnt=6),t.title=formatDate(start,opt("titleFormat")),t.start=start,t.end=end,t.visStart=visStart,t.visEnd=visEnd,renderBasic(rowCnt,colCnt,!0)}var t=this;t.render=render,BasicView.call(t,element,calendar,"month");var opt=t.opt,renderBasic=t.renderBasic,skipHiddenDays=t.skipHiddenDays,getCellsPerWeek=t.getCellsPerWeek,formatDate=calendar.formatDate}function BasicWeekView(element,calendar){function render(date,delta){delta&&addDays(date,7*delta);var start=addDays(cloneDate(date),-((date.getDay()-opt("firstDay")+7)%7)),end=addDays(cloneDate(start),7),visStart=cloneDate(start);skipHiddenDays(visStart);var visEnd=cloneDate(end);skipHiddenDays(visEnd,-1,!0);var colCnt=getCellsPerWeek();t.start=start,t.end=end,t.visStart=visStart,t.visEnd=visEnd,t.title=formatDates(visStart,addDays(cloneDate(visEnd),-1),opt("titleFormat")),renderBasic(1,colCnt,!1)}var t=this;t.render=render,BasicView.call(t,element,calendar,"basicWeek");var opt=t.opt,renderBasic=t.renderBasic,skipHiddenDays=t.skipHiddenDays,getCellsPerWeek=t.getCellsPerWeek,formatDates=calendar.formatDates}function BasicDayView(element,calendar){function render(date,delta){delta&&addDays(date,delta),skipHiddenDays(date,0>delta?-1:1);var start=cloneDate(date,!0),end=addDays(cloneDate(start),1);t.title=formatDate(date,opt("titleFormat")),t.start=t.visStart=start,t.end=t.visEnd=end,renderBasic(1,1,!1)}var t=this;t.render=render,BasicView.call(t,element,calendar,"basicDay");var opt=t.opt,renderBasic=t.renderBasic,skipHiddenDays=t.skipHiddenDays,formatDate=calendar.formatDate}function BasicView(element,calendar,viewName){function renderBasic(_rowCnt,_colCnt,_showNumbers){rowCnt=_rowCnt,colCnt=_colCnt,showNumbers=_showNumbers,updateOptions(),body||buildEventContainer(),buildTable()}function updateOptions(){tm=opt("theme")?"ui":"fc",colFormat=opt("columnFormat"),showWeekNumbers=opt("weekNumbers"),weekNumberTitle=opt("weekNumberTitle"),weekNumberFormat="iso"!=opt("weekNumberCalculation")?"w":"W"}function buildEventContainer(){daySegmentContainer=$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(element)}function buildTable(){var html=buildTableHTML();table&&table.remove(),table=$(html).appendTo(element),head=table.find("thead"),headCells=head.find(".fc-day-header"),body=table.find("tbody"),bodyRows=body.find("tr"),bodyCells=body.find(".fc-day"),bodyFirstCells=bodyRows.find("td:first-child"),firstRowCellInners=bodyRows.eq(0).find(".fc-day > div"),firstRowCellContentInners=bodyRows.eq(0).find(".fc-day-content > div"),markFirstLast(head.add(head.find("tr"))),markFirstLast(bodyRows),bodyRows.eq(0).addClass("fc-first"),bodyRows.filter(":last").addClass("fc-last"),bodyCells.each(function(i,_cell){var date=cellToDate(Math.floor(i/colCnt),i%colCnt);trigger("dayRender",t,date,$(_cell))}),dayBind(bodyCells)}function buildTableHTML(){var html="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+buildHeadHTML()+buildBodyHTML()+"</table>";return html}function buildHeadHTML(){var col,date,headerClass=tm+"-widget-header",html="";for(html+="<thead><tr>",showWeekNumbers&&(html+="<th class='fc-week-number "+headerClass+"'>"+htmlEscape(weekNumberTitle)+"</th>"),col=0;colCnt>col;col++)date=cellToDate(0,col),html+="<th class='fc-day-header fc-"+dayIDs[date.getDay()]+" "+headerClass+"'>"+htmlEscape(formatDate(date,colFormat))+"</th>";return html+="</tr></thead>"}function buildBodyHTML(){var row,col,date,contentClass=tm+"-widget-content",html="";for(html+="<tbody>",row=0;rowCnt>row;row++){for(html+="<tr class='fc-week'>",showWeekNumbers&&(date=cellToDate(row,0),html+="<td class='fc-week-number "+contentClass+"'><div>"+htmlEscape(formatDate(date,weekNumberFormat))+"</div></td>"),col=0;colCnt>col;col++)date=cellToDate(row,col),html+=buildCellHTML(date);html+="</tr>"}return html+="</tbody>"}function buildCellHTML(date){var contentClass=tm+"-widget-content",month=t.start.getMonth(),today=clearTime(new Date),html="",classNames=["fc-day","fc-"+dayIDs[date.getDay()],contentClass];return date.getMonth()!=month&&classNames.push("fc-other-month"),+date==+today?classNames.push("fc-today",tm+"-state-highlight"):classNames.push(today>date?"fc-past":"fc-future"),html+="<td class='"+classNames.join(" ")+"' data-date='"+formatDate(date,"yyyy-MM-dd")+"'><div>",showNumbers&&(html+="<div class='fc-day-number'>"+date.getDate()+"</div>"),html+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function setHeight(height){viewHeight=height;var rowHeight,rowHeightLast,cell,bodyHeight=viewHeight-head.height();"variable"==opt("weekMode")?rowHeight=rowHeightLast=Math.floor(bodyHeight/(1==rowCnt?2:6)):(rowHeight=Math.floor(bodyHeight/rowCnt),rowHeightLast=bodyHeight-rowHeight*(rowCnt-1)),bodyFirstCells.each(function(i,_cell){rowCnt>i&&(cell=$(_cell),cell.find("> div").css("min-height",(i==rowCnt-1?rowHeightLast:rowHeight)-vsides(cell)))})}function setWidth(width){viewWidth=width,colPositions.clear(),colContentPositions.clear(),weekNumberWidth=0,showWeekNumbers&&(weekNumberWidth=head.find("th.fc-week-number").outerWidth()),colWidth=Math.floor((viewWidth-weekNumberWidth)/colCnt),setOuterWidth(headCells.slice(0,-1),colWidth)}function dayBind(days){days.click(dayClick).mousedown(daySelectionMousedown)}function dayClick(ev){if(!opt("selectable")){var date=parseISO8601($(this).data("date"));trigger("dayClick",this,date,!0,ev)}}function renderDayOverlay(overlayStart,overlayEnd,refreshCoordinateGrid){refreshCoordinateGrid&&coordinateGrid.build();for(var segments=rangeToSegments(overlayStart,overlayEnd),i=0;i<segments.length;i++){var segment=segments[i];dayBind(renderCellOverlay(segment.row,segment.leftCol,segment.row,segment.rightCol))}}function renderCellOverlay(row0,col0,row1,col1){var rect=coordinateGrid.rect(row0,col0,row1,col1,element);return renderOverlay(rect,element)}function defaultSelectionEnd(startDate){return cloneDate(startDate)}function renderSelection(startDate,endDate){renderDayOverlay(startDate,addDays(cloneDate(endDate),1),!0)}function clearSelection(){clearOverlays()}function reportDayClick(date,allDay,ev){var cell=dateToCell(date),_element=bodyCells[cell.row*colCnt+cell.col];trigger("dayClick",_element,date,allDay,ev)}function dragStart(_dragElement,ev){hoverListener.start(function(cell){clearOverlays(),cell&&renderCellOverlay(cell.row,cell.col,cell.row,cell.col)},ev)}function dragStop(_dragElement,ev,ui){var cell=hoverListener.stop();if(clearOverlays(),cell){var d=cellToDate(cell);trigger("drop",_dragElement,d,!0,ev,ui)}}function defaultEventEnd(event){return cloneDate(event.start)}function colLeft(col){return colPositions.left(col)}function colRight(col){return colPositions.right(col)}function colContentLeft(col){return colContentPositions.left(col)}function colContentRight(col){return colContentPositions.right(col)}function allDayRow(i){return bodyRows.eq(i)}var t=this;t.renderBasic=renderBasic,t.setHeight=setHeight,t.setWidth=setWidth,t.renderDayOverlay=renderDayOverlay,t.defaultSelectionEnd=defaultSelectionEnd,t.renderSelection=renderSelection,t.clearSelection=clearSelection,t.reportDayClick=reportDayClick,t.dragStart=dragStart,t.dragStop=dragStop,t.defaultEventEnd=defaultEventEnd,t.getHoverListener=function(){return hoverListener},t.colLeft=colLeft,t.colRight=colRight,t.colContentLeft=colContentLeft,t.colContentRight=colContentRight,t.getIsCellAllDay=function(){return!0},t.allDayRow=allDayRow,t.getRowCnt=function(){return rowCnt},t.getColCnt=function(){return colCnt},t.getColWidth=function(){return colWidth},t.getDaySegmentContainer=function(){return daySegmentContainer},View.call(t,element,calendar,viewName),OverlayManager.call(t),SelectionManager.call(t),BasicEventRenderer.call(t);var table,head,headCells,body,bodyRows,bodyCells,bodyFirstCells,firstRowCellInners,firstRowCellContentInners,daySegmentContainer,viewWidth,viewHeight,colWidth,weekNumberWidth,rowCnt,colCnt,showNumbers,coordinateGrid,hoverListener,colPositions,colContentPositions,tm,colFormat,showWeekNumbers,weekNumberTitle,weekNumberFormat,opt=t.opt,trigger=t.trigger,renderOverlay=t.renderOverlay,clearOverlays=t.clearOverlays,daySelectionMousedown=t.daySelectionMousedown,cellToDate=t.cellToDate,dateToCell=t.dateToCell,rangeToSegments=t.rangeToSegments,formatDate=calendar.formatDate;disableTextSelection(element.addClass("fc-grid")),coordinateGrid=new CoordinateGrid(function(rows,cols){var e,n,p;
headCells.each(function(i,_e){e=$(_e),n=e.offset().left,i&&(p[1]=n),p=[n],cols[i]=p}),p[1]=n+e.outerWidth(),bodyRows.each(function(i,_e){rowCnt>i&&(e=$(_e),n=e.offset().top,i&&(p[1]=n),p=[n],rows[i]=p)}),p[1]=n+e.outerHeight()}),hoverListener=new HoverListener(coordinateGrid),colPositions=new HorizontalPositionCache(function(col){return firstRowCellInners.eq(col)}),colContentPositions=new HorizontalPositionCache(function(col){return firstRowCellContentInners.eq(col)})}function BasicEventRenderer(){function renderEvents(events,modifiedEventId){t.renderDayEvents(events,modifiedEventId)}function clearEvents(){t.getDaySegmentContainer().empty()}var t=this;t.renderEvents=renderEvents,t.clearEvents=clearEvents,DayEventRenderer.call(t)}function AgendaWeekView(element,calendar){function render(date,delta){delta&&addDays(date,7*delta);var start=addDays(cloneDate(date),-((date.getDay()-opt("firstDay")+7)%7)),end=addDays(cloneDate(start),7),visStart=cloneDate(start);skipHiddenDays(visStart);var visEnd=cloneDate(end);skipHiddenDays(visEnd,-1,!0);var colCnt=getCellsPerWeek();t.title=formatDates(visStart,addDays(cloneDate(visEnd),-1),opt("titleFormat")),t.start=start,t.end=end,t.visStart=visStart,t.visEnd=visEnd,renderAgenda(colCnt)}var t=this;t.render=render,AgendaView.call(t,element,calendar,"agendaWeek");var opt=t.opt,renderAgenda=t.renderAgenda,skipHiddenDays=t.skipHiddenDays,getCellsPerWeek=t.getCellsPerWeek,formatDates=calendar.formatDates}function AgendaDayView(element,calendar){function render(date,delta){delta&&addDays(date,delta),skipHiddenDays(date,0>delta?-1:1);var start=cloneDate(date,!0),end=addDays(cloneDate(start),1);t.title=formatDate(date,opt("titleFormat")),t.start=t.visStart=start,t.end=t.visEnd=end,renderAgenda(1)}var t=this;t.render=render,AgendaView.call(t,element,calendar,"agendaDay");var opt=t.opt,renderAgenda=t.renderAgenda,skipHiddenDays=t.skipHiddenDays,formatDate=calendar.formatDate}function AgendaView(element,calendar,viewName){function renderAgenda(c){colCnt=c,updateOptions(),dayTable?buildDayTable():buildSkeleton()}function updateOptions(){tm=opt("theme")?"ui":"fc",rtl=opt("isRTL"),minMinute=parseTime(opt("minTime")),maxMinute=parseTime(opt("maxTime")),colFormat=opt("columnFormat"),showWeekNumbers=opt("weekNumbers"),weekNumberTitle=opt("weekNumberTitle"),weekNumberFormat="iso"!=opt("weekNumberCalculation")?"w":"W",snapMinutes=opt("snapMinutes")||opt("slotMinutes")}function buildSkeleton(){var s,d,i,maxd,minutes,headerClass=tm+"-widget-header",contentClass=tm+"-widget-content",slotNormal=opt("slotMinutes")%15==0;for(buildDayTable(),slotLayer=$("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(element),opt("allDaySlot")?(daySegmentContainer=$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(slotLayer),s="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+headerClass+" fc-agenda-axis'>"+opt("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+headerClass+" fc-agenda-gutter'>&nbsp;</th></tr></table>",allDayTable=$(s).appendTo(slotLayer),allDayRow=allDayTable.find("tr"),dayBind(allDayRow.find("td")),slotLayer.append("<div class='fc-agenda-divider "+headerClass+"'><div class='fc-agenda-divider-inner'/></div>")):daySegmentContainer=$([]),slotScroller=$("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(slotLayer),slotContainer=$("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(slotScroller),slotSegmentContainer=$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(slotContainer),s="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",d=zeroDate(),maxd=addMinutes(cloneDate(d),maxMinute),addMinutes(d,minMinute),slotCnt=0,i=0;maxd>d;i++)minutes=d.getMinutes(),s+="<tr class='fc-slot"+i+" "+(minutes?"fc-minor":"")+"'><th class='fc-agenda-axis "+headerClass+"'>"+(slotNormal&&minutes?"&nbsp;":formatDate(d,opt("axisFormat")))+"</th><td class='"+contentClass+"'><div style='position:relative'>&nbsp;</div></td></tr>",addMinutes(d,opt("slotMinutes")),slotCnt++;s+="</tbody></table>",slotTable=$(s).appendTo(slotContainer),slotBind(slotTable.find("td"))}function buildDayTable(){var html=buildDayTableHTML();dayTable&&dayTable.remove(),dayTable=$(html).appendTo(element),dayHead=dayTable.find("thead"),dayHeadCells=dayHead.find("th").slice(1,-1),dayBody=dayTable.find("tbody"),dayBodyCells=dayBody.find("td").slice(0,-1),dayBodyCellInners=dayBodyCells.find("> div"),dayBodyCellContentInners=dayBodyCells.find(".fc-day-content > div"),dayBodyFirstCell=dayBodyCells.eq(0),dayBodyFirstCellStretcher=dayBodyCellInners.eq(0),markFirstLast(dayHead.add(dayHead.find("tr"))),markFirstLast(dayBody.add(dayBody.find("tr")))}function buildDayTableHTML(){var html="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+buildDayTableHeadHTML()+buildDayTableBodyHTML()+"</table>";return html}function buildDayTableHeadHTML(){var date,weekText,col,headerClass=tm+"-widget-header",html="";for(html+="<thead><tr>",showWeekNumbers?(date=cellToDate(0,0),weekText=formatDate(date,weekNumberFormat),rtl?weekText+=weekNumberTitle:weekText=weekNumberTitle+weekText,html+="<th class='fc-agenda-axis fc-week-number "+headerClass+"'>"+htmlEscape(weekText)+"</th>"):html+="<th class='fc-agenda-axis "+headerClass+"'>&nbsp;</th>",col=0;colCnt>col;col++)date=cellToDate(0,col),html+="<th class='fc-"+dayIDs[date.getDay()]+" fc-col"+col+" "+headerClass+"'>"+htmlEscape(formatDate(date,colFormat))+"</th>";return html+="<th class='fc-agenda-gutter "+headerClass+"'>&nbsp;</th></tr></thead>"}function buildDayTableBodyHTML(){var date,col,cellsHTML,cellHTML,classNames,headerClass=tm+"-widget-header",contentClass=tm+"-widget-content",today=clearTime(new Date),html="";for(html+="<tbody><tr><th class='fc-agenda-axis "+headerClass+"'>&nbsp;</th>",cellsHTML="",col=0;colCnt>col;col++)date=cellToDate(0,col),classNames=["fc-col"+col,"fc-"+dayIDs[date.getDay()],contentClass],+date==+today?classNames.push(tm+"-state-highlight","fc-today"):classNames.push(today>date?"fc-past":"fc-future"),cellHTML="<td class='"+classNames.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",cellsHTML+=cellHTML;return html+=cellsHTML,html+="<td class='fc-agenda-gutter "+contentClass+"'>&nbsp;</td></tr></tbody>"}function setHeight(height){height===undefined&&(height=viewHeight),viewHeight=height,slotTopCache={};var headHeight=dayBody.position().top,allDayHeight=slotScroller.position().top,bodyHeight=Math.min(height-headHeight,slotTable.height()+allDayHeight+1);dayBodyFirstCellStretcher.height(bodyHeight-vsides(dayBodyFirstCell)),slotLayer.css("top",headHeight),slotScroller.height(bodyHeight-allDayHeight-1),slotHeight=slotTable.find("tr:first").height()+1,snapRatio=opt("slotMinutes")/snapMinutes,snapHeight=slotHeight/snapRatio}function setWidth(width){viewWidth=width,colPositions.clear(),colContentPositions.clear();var axisFirstCells=dayHead.find("th:first");allDayTable&&(axisFirstCells=axisFirstCells.add(allDayTable.find("th:first"))),axisFirstCells=axisFirstCells.add(slotTable.find("th:first")),axisWidth=0,setOuterWidth(axisFirstCells.width("").each(function(i,_cell){axisWidth=Math.max(axisWidth,$(_cell).outerWidth())}),axisWidth);var gutterCells=dayTable.find(".fc-agenda-gutter");allDayTable&&(gutterCells=gutterCells.add(allDayTable.find("th.fc-agenda-gutter")));var slotTableWidth=slotScroller[0].clientWidth;gutterWidth=slotScroller.width()-slotTableWidth,gutterWidth?(setOuterWidth(gutterCells,gutterWidth),gutterCells.show().prev().removeClass("fc-last")):gutterCells.hide().prev().addClass("fc-last"),colWidth=Math.floor((slotTableWidth-axisWidth)/colCnt),setOuterWidth(dayHeadCells.slice(0,-1),colWidth)}function resetScroll(){function scroll(){slotScroller.scrollTop(top)}var d0=zeroDate(),scrollDate=cloneDate(d0);scrollDate.setHours(opt("firstHour"));var top=timePosition(d0,scrollDate)+1;scroll(),setTimeout(scroll,0)}function afterRender(){resetScroll()}function dayBind(cells){cells.click(slotClick).mousedown(daySelectionMousedown)}function slotBind(cells){cells.click(slotClick).mousedown(slotSelectionMousedown)}function slotClick(ev){if(!opt("selectable")){var col=Math.min(colCnt-1,Math.floor((ev.pageX-dayTable.offset().left-axisWidth)/colWidth)),date=cellToDate(0,col),rowMatch=this.parentNode.className.match(/fc-slot(\d+)/);if(rowMatch){var mins=parseInt(rowMatch[1])*opt("slotMinutes"),hours=Math.floor(mins/60);date.setHours(hours),date.setMinutes(mins%60+minMinute),trigger("dayClick",dayBodyCells[col],date,!1,ev)}else trigger("dayClick",dayBodyCells[col],date,!0,ev)}}function renderDayOverlay(overlayStart,overlayEnd,refreshCoordinateGrid){refreshCoordinateGrid&&coordinateGrid.build();for(var segments=rangeToSegments(overlayStart,overlayEnd),i=0;i<segments.length;i++){var segment=segments[i];dayBind(renderCellOverlay(segment.row,segment.leftCol,segment.row,segment.rightCol))}}function renderCellOverlay(row0,col0,row1,col1){var rect=coordinateGrid.rect(row0,col0,row1,col1,slotLayer);return renderOverlay(rect,slotLayer)}function renderSlotOverlay(overlayStart,overlayEnd){for(var i=0;colCnt>i;i++){var dayStart=cellToDate(0,i),dayEnd=addDays(cloneDate(dayStart),1),stretchStart=new Date(Math.max(dayStart,overlayStart)),stretchEnd=new Date(Math.min(dayEnd,overlayEnd));if(stretchEnd>stretchStart){var rect=coordinateGrid.rect(0,i,0,i,slotContainer),top=timePosition(dayStart,stretchStart),bottom=timePosition(dayStart,stretchEnd);rect.top=top,rect.height=bottom-top,slotBind(renderOverlay(rect,slotContainer))}}}function colLeft(col){return colPositions.left(col)}function colContentLeft(col){return colContentPositions.left(col)}function colRight(col){return colPositions.right(col)}function colContentRight(col){return colContentPositions.right(col)}function getIsCellAllDay(cell){return opt("allDaySlot")&&!cell.row}function realCellToDate(cell){var d=cellToDate(0,cell.col),slotIndex=cell.row;return opt("allDaySlot")&&slotIndex--,slotIndex>=0&&addMinutes(d,minMinute+slotIndex*snapMinutes),d}function timePosition(day,time){if(day=cloneDate(day,!0),time<addMinutes(cloneDate(day),minMinute))return 0;if(time>=addMinutes(cloneDate(day),maxMinute))return slotTable.height();var slotMinutes=opt("slotMinutes"),minutes=60*time.getHours()+time.getMinutes()-minMinute,slotI=Math.floor(minutes/slotMinutes),slotTop=slotTopCache[slotI];return slotTop===undefined&&(slotTop=slotTopCache[slotI]=slotTable.find("tr").eq(slotI).find("td div")[0].offsetTop),Math.max(0,Math.round(slotTop-1+slotHeight*(minutes%slotMinutes/slotMinutes)))}function getAllDayRow(){return allDayRow}function defaultEventEnd(event){var start=cloneDate(event.start);return event.allDay?start:addMinutes(start,opt("defaultEventMinutes"))}function defaultSelectionEnd(startDate,allDay){return allDay?cloneDate(startDate):addMinutes(cloneDate(startDate),opt("slotMinutes"))}function renderSelection(startDate,endDate,allDay){allDay?opt("allDaySlot")&&renderDayOverlay(startDate,addDays(cloneDate(endDate),1),!0):renderSlotSelection(startDate,endDate)}function renderSlotSelection(startDate,endDate){var helperOption=opt("selectHelper");if(coordinateGrid.build(),helperOption){var col=dateToCell(startDate).col;if(col>=0&&colCnt>col){var rect=coordinateGrid.rect(0,col,0,col,slotContainer),top=timePosition(startDate,startDate),bottom=timePosition(startDate,endDate);if(bottom>top){if(rect.top=top,rect.height=bottom-top,rect.left+=2,rect.width-=5,$.isFunction(helperOption)){var helperRes=helperOption(startDate,endDate);helperRes&&(rect.position="absolute",selectionHelper=$(helperRes).css(rect).appendTo(slotContainer))}else rect.isStart=!0,rect.isEnd=!0,selectionHelper=$(slotSegHtml({title:"",start:startDate,end:endDate,className:["fc-select-helper"],editable:!1},rect)),selectionHelper.css("opacity",opt("dragOpacity"));selectionHelper&&(slotBind(selectionHelper),slotContainer.append(selectionHelper),setOuterWidth(selectionHelper,rect.width,!0),setOuterHeight(selectionHelper,rect.height,!0))}}}else renderSlotOverlay(startDate,endDate)}function clearSelection(){clearOverlays(),selectionHelper&&(selectionHelper.remove(),selectionHelper=null)}function slotSelectionMousedown(ev){if(1==ev.which&&opt("selectable")){unselect(ev);var dates;hoverListener.start(function(cell,origCell){if(clearSelection(),cell&&cell.col==origCell.col&&!getIsCellAllDay(cell)){var d1=realCellToDate(origCell),d2=realCellToDate(cell);dates=[d1,addMinutes(cloneDate(d1),snapMinutes),d2,addMinutes(cloneDate(d2),snapMinutes)].sort(dateCompare),renderSlotSelection(dates[0],dates[3])}else dates=null},ev),$(document).one("mouseup",function(ev){hoverListener.stop(),dates&&(+dates[0]==+dates[1]&&reportDayClick(dates[0],!1,ev),reportSelection(dates[0],dates[3],!1,ev))})}}function reportDayClick(date,allDay,ev){trigger("dayClick",dayBodyCells[dateToCell(date).col],date,allDay,ev)}function dragStart(_dragElement,ev){hoverListener.start(function(cell){if(clearOverlays(),cell)if(getIsCellAllDay(cell))renderCellOverlay(cell.row,cell.col,cell.row,cell.col);else{var d1=realCellToDate(cell),d2=addMinutes(cloneDate(d1),opt("defaultEventMinutes"));renderSlotOverlay(d1,d2)}},ev)}function dragStop(_dragElement,ev,ui){var cell=hoverListener.stop();clearOverlays(),cell&&trigger("drop",_dragElement,realCellToDate(cell),getIsCellAllDay(cell),ev,ui)}var t=this;t.renderAgenda=renderAgenda,t.setWidth=setWidth,t.setHeight=setHeight,t.afterRender=afterRender,t.defaultEventEnd=defaultEventEnd,t.timePosition=timePosition,t.getIsCellAllDay=getIsCellAllDay,t.allDayRow=getAllDayRow,t.getCoordinateGrid=function(){return coordinateGrid},t.getHoverListener=function(){return hoverListener},t.colLeft=colLeft,t.colRight=colRight,t.colContentLeft=colContentLeft,t.colContentRight=colContentRight,t.getDaySegmentContainer=function(){return daySegmentContainer},t.getSlotSegmentContainer=function(){return slotSegmentContainer},t.getMinMinute=function(){return minMinute},t.getMaxMinute=function(){return maxMinute},t.getSlotContainer=function(){return slotContainer},t.getRowCnt=function(){return 1},t.getColCnt=function(){return colCnt},t.getColWidth=function(){return colWidth},t.getSnapHeight=function(){return snapHeight},t.getSnapMinutes=function(){return snapMinutes},t.defaultSelectionEnd=defaultSelectionEnd,t.renderDayOverlay=renderDayOverlay,t.renderSelection=renderSelection,t.clearSelection=clearSelection,t.reportDayClick=reportDayClick,t.dragStart=dragStart,t.dragStop=dragStop,View.call(t,element,calendar,viewName),OverlayManager.call(t),SelectionManager.call(t),AgendaEventRenderer.call(t);var dayTable,dayHead,dayHeadCells,dayBody,dayBodyCells,dayBodyCellInners,dayBodyCellContentInners,dayBodyFirstCell,dayBodyFirstCellStretcher,slotLayer,daySegmentContainer,allDayTable,allDayRow,slotScroller,slotContainer,slotSegmentContainer,slotTable,selectionHelper,viewWidth,viewHeight,axisWidth,colWidth,gutterWidth,slotHeight,snapMinutes,snapRatio,snapHeight,colCnt,slotCnt,coordinateGrid,hoverListener,colPositions,colContentPositions,tm,rtl,minMinute,maxMinute,colFormat,showWeekNumbers,weekNumberTitle,weekNumberFormat,opt=t.opt,trigger=t.trigger,renderOverlay=t.renderOverlay,clearOverlays=t.clearOverlays,reportSelection=t.reportSelection,unselect=t.unselect,daySelectionMousedown=t.daySelectionMousedown,slotSegHtml=t.slotSegHtml,cellToDate=t.cellToDate,dateToCell=t.dateToCell,rangeToSegments=t.rangeToSegments,formatDate=calendar.formatDate,slotTopCache={};disableTextSelection(element.addClass("fc-agenda")),coordinateGrid=new CoordinateGrid(function(rows,cols){function constrain(n){return Math.max(slotScrollerTop,Math.min(slotScrollerBottom,n))}var e,n,p;dayHeadCells.each(function(i,_e){e=$(_e),n=e.offset().left,i&&(p[1]=n),p=[n],cols[i]=p}),p[1]=n+e.outerWidth(),opt("allDaySlot")&&(e=allDayRow,n=e.offset().top,rows[0]=[n,n+e.outerHeight()]);for(var slotTableTop=slotContainer.offset().top,slotScrollerTop=slotScroller.offset().top,slotScrollerBottom=slotScrollerTop+slotScroller.outerHeight(),i=0;slotCnt*snapRatio>i;i++)rows.push([constrain(slotTableTop+snapHeight*i),constrain(slotTableTop+snapHeight*(i+1))])}),hoverListener=new HoverListener(coordinateGrid),colPositions=new HorizontalPositionCache(function(col){return dayBodyCellInners.eq(col)}),colContentPositions=new HorizontalPositionCache(function(col){return dayBodyCellContentInners.eq(col)})}function AgendaEventRenderer(){function renderEvents(events,modifiedEventId){var i,len=events.length,dayEvents=[],slotEvents=[];for(i=0;len>i;i++)events[i].allDay?dayEvents.push(events[i]):slotEvents.push(events[i]);opt("allDaySlot")&&(renderDayEvents(dayEvents,modifiedEventId),setHeight()),renderSlotSegs(compileSlotSegs(slotEvents),modifiedEventId)}function clearEvents(){getDaySegmentContainer().empty(),getSlotSegmentContainer().empty()}function compileSlotSegs(events){var d,i,j,seg,colSegs,colCnt=getColCnt(),minMinute=getMinMinute(),maxMinute=getMaxMinute(),visEventEnds=$.map(events,slotEventEnd),segs=[];for(i=0;colCnt>i;i++)for(d=cellToDate(0,i),addMinutes(d,minMinute),colSegs=sliceSegs(events,visEventEnds,d,addMinutes(cloneDate(d),maxMinute-minMinute)),colSegs=placeSlotSegs(colSegs),j=0;j<colSegs.length;j++)seg=colSegs[j],seg.col=i,segs.push(seg);return segs}function sliceSegs(events,visEventEnds,start,end){var i,event,eventStart,eventEnd,segStart,segEnd,isStart,isEnd,segs=[],len=events.length;for(i=0;len>i;i++)event=events[i],eventStart=event.start,eventEnd=visEventEnds[i],eventEnd>start&&end>eventStart&&(start>eventStart?(segStart=cloneDate(start),isStart=!1):(segStart=eventStart,isStart=!0),eventEnd>end?(segEnd=cloneDate(end),isEnd=!1):(segEnd=eventEnd,isEnd=!0),segs.push({event:event,start:segStart,end:segEnd,isStart:isStart,isEnd:isEnd}));return segs.sort(compareSlotSegs)}function slotEventEnd(event){return event.end?cloneDate(event.end):addMinutes(cloneDate(event.start),opt("defaultEventMinutes"))}function renderSlotSegs(segs,modifiedEventId){var i,seg,event,top,bottom,columnLeft,columnRight,columnWidth,width,left,right,eventElements,eventElement,triggerRes,titleElement,height,segCnt=segs.length,html="",slotSegmentContainer=getSlotSegmentContainer(),isRTL=opt("isRTL");for(i=0;segCnt>i;i++)seg=segs[i],event=seg.event,top=timePosition(seg.start,seg.start),bottom=timePosition(seg.start,seg.end),columnLeft=colContentLeft(seg.col),columnRight=colContentRight(seg.col),columnWidth=columnRight-columnLeft,columnRight-=.025*columnWidth,columnWidth=columnRight-columnLeft,width=columnWidth*(seg.forwardCoord-seg.backwardCoord),opt("slotEventOverlap")&&(width=Math.max(2*(width-10),width)),isRTL?(right=columnRight-seg.backwardCoord*columnWidth,left=right-width):(left=columnLeft+seg.backwardCoord*columnWidth,right=left+width),left=Math.max(left,columnLeft),right=Math.min(right,columnRight),width=right-left,seg.top=top,seg.left=left,seg.outerWidth=width,seg.outerHeight=bottom-top,html+=slotSegHtml(event,seg);for(slotSegmentContainer[0].innerHTML=html,eventElements=slotSegmentContainer.children(),i=0;segCnt>i;i++)seg=segs[i],event=seg.event,eventElement=$(eventElements[i]),triggerRes=trigger("eventRender",event,event,eventElement),triggerRes===!1?eventElement.remove():(triggerRes&&triggerRes!==!0&&(eventElement.remove(),eventElement=$(triggerRes).css({position:"absolute",top:seg.top,left:seg.left}).appendTo(slotSegmentContainer)),seg.element=eventElement,event._id===modifiedEventId?bindSlotSeg(event,eventElement,seg):eventElement[0]._fci=i,reportEventElement(event,eventElement));for(lazySegBind(slotSegmentContainer,segs,bindSlotSeg),i=0;segCnt>i;i++)seg=segs[i],(eventElement=seg.element)&&(seg.vsides=vsides(eventElement,!0),seg.hsides=hsides(eventElement,!0),titleElement=eventElement.find(".fc-event-title"),titleElement.length&&(seg.contentTop=titleElement[0].offsetTop));for(i=0;segCnt>i;i++)seg=segs[i],(eventElement=seg.element)&&(eventElement[0].style.width=Math.max(0,seg.outerWidth-seg.hsides)+"px",height=Math.max(0,seg.outerHeight-seg.vsides),eventElement[0].style.height=height+"px",event=seg.event,seg.contentTop!==undefined&&height-seg.contentTop<10&&(eventElement.find("div.fc-event-time").text(formatDate(event.start,opt("timeFormat"))+" - "+event.title),eventElement.find("div.fc-event-title").remove()),trigger("eventAfterRender",event,event,eventElement))}function slotSegHtml(event,seg){var html="<",url=event.url,skinCss=getSkinCss(event,opt),classes=["fc-event","fc-event-vert"];return isEventDraggable(event)&&classes.push("fc-event-draggable"),seg.isStart&&classes.push("fc-event-start"),seg.isEnd&&classes.push("fc-event-end"),classes=classes.concat(event.className),event.source&&(classes=classes.concat(event.source.className||[])),html+=url?"a href='"+htmlEscape(event.url)+"'":"div",html+=" class='"+classes.join(" ")+"' style='position:absolute;top:"+seg.top+"px;left:"+seg.left+"px;"+skinCss+"'><div class='fc-event-inner'><div class='fc-event-time'>"+htmlEscape(formatDates(event.start,event.end,opt("timeFormat")))+"</div><div class='fc-event-title'>"+htmlEscape(event.title||"")+"</div></div><div class='fc-event-bg'></div>",seg.isEnd&&isEventResizable(event)&&(html+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),html+="</"+(url?"a":"div")+">"}function bindSlotSeg(event,eventElement,seg){var timeElement=eventElement.find("div.fc-event-time");isEventDraggable(event)&&draggableSlotEvent(event,eventElement,timeElement),seg.isEnd&&isEventResizable(event)&&resizableSlotEvent(event,eventElement,timeElement),eventElementHandlers(event,eventElement)}function draggableDayEvent(event,eventElement,seg){function resetElement(){allDay||(eventElement.width(origWidth).height("").draggable("option","grid",null),allDay=!0)}var origWidth,revert,dayDelta,isStart=seg.isStart,allDay=!0,hoverListener=getHoverListener(),colWidth=getColWidth(),snapHeight=getSnapHeight(),snapMinutes=getSnapMinutes(),minMinute=getMinMinute();eventElement.draggable({opacity:opt("dragOpacity","month"),revertDuration:opt("dragRevertDuration"),start:function(ev,ui){trigger("eventDragStart",eventElement,event,ev,ui),hideEvents(event,eventElement),origWidth=eventElement.width(),hoverListener.start(function(cell,origCell){if(clearOverlays(),cell){revert=!1;var origDate=cellToDate(0,origCell.col),date=cellToDate(0,cell.col);dayDelta=dayDiff(date,origDate),cell.row?isStart?allDay&&(eventElement.width(colWidth-10),setOuterHeight(eventElement,snapHeight*Math.round((event.end?(event.end-event.start)/MINUTE_MS:opt("defaultEventMinutes"))/snapMinutes)),eventElement.draggable("option","grid",[colWidth,1]),allDay=!1):revert=!0:(renderDayOverlay(addDays(cloneDate(event.start),dayDelta),addDays(exclEndDay(event),dayDelta)),resetElement()),revert=revert||allDay&&!dayDelta}else resetElement(),revert=!0;eventElement.draggable("option","revert",revert)},ev,"drag")},stop:function(ev,ui){if(hoverListener.stop(),clearOverlays(),trigger("eventDragStop",eventElement,event,ev,ui),revert)resetElement(),eventElement.css("filter",""),showEvents(event,eventElement);else{var minuteDelta=0;allDay||(minuteDelta=Math.round((eventElement.offset().top-getSlotContainer().offset().top)/snapHeight)*snapMinutes+minMinute-(60*event.start.getHours()+event.start.getMinutes())),eventDrop(this,event,dayDelta,minuteDelta,allDay,ev,ui)}}})}function draggableSlotEvent(event,eventElement,timeElement){function updateUI(){clearOverlays(),isInBounds&&(isAllDay?(timeElement.hide(),eventElement.draggable("option","grid",null),renderDayOverlay(addDays(cloneDate(event.start),dayDelta),addDays(exclEndDay(event),dayDelta))):(updateTimeText(minuteDelta),timeElement.css("display",""),eventElement.draggable("option","grid",[colWidth,snapHeight])))}function updateTimeText(minuteDelta){var newEnd,newStart=addMinutes(cloneDate(event.start),minuteDelta);event.end&&(newEnd=addMinutes(cloneDate(event.end),minuteDelta)),timeElement.text(formatDates(newStart,newEnd,opt("timeFormat")))}var origPosition,origCell,isInBounds,prevIsInBounds,isAllDay,prevIsAllDay,colDelta,prevColDelta,dayDelta,minuteDelta,prevMinuteDelta,coordinateGrid=t.getCoordinateGrid(),colCnt=getColCnt(),colWidth=getColWidth(),snapHeight=getSnapHeight(),snapMinutes=getSnapMinutes();eventElement.draggable({scroll:!1,grid:[colWidth,snapHeight],axis:1==colCnt?"y":!1,opacity:opt("dragOpacity"),revertDuration:opt("dragRevertDuration"),start:function(ev,ui){trigger("eventDragStart",eventElement,event,ev,ui),hideEvents(event,eventElement),coordinateGrid.build(),origPosition=eventElement.position(),origCell=coordinateGrid.cell(ev.pageX,ev.pageY),isInBounds=prevIsInBounds=!0,isAllDay=prevIsAllDay=getIsCellAllDay(origCell),colDelta=prevColDelta=0,dayDelta=0,minuteDelta=prevMinuteDelta=0},drag:function(ev,ui){var cell=coordinateGrid.cell(ev.pageX,ev.pageY);if(isInBounds=!!cell){if(isAllDay=getIsCellAllDay(cell),colDelta=Math.round((ui.position.left-origPosition.left)/colWidth),colDelta!=prevColDelta){var origDate=cellToDate(0,origCell.col),col=origCell.col+colDelta;col=Math.max(0,col),col=Math.min(colCnt-1,col);var date=cellToDate(0,col);dayDelta=dayDiff(date,origDate)}isAllDay||(minuteDelta=Math.round((ui.position.top-origPosition.top)/snapHeight)*snapMinutes)}(isInBounds!=prevIsInBounds||isAllDay!=prevIsAllDay||colDelta!=prevColDelta||minuteDelta!=prevMinuteDelta)&&(updateUI(),prevIsInBounds=isInBounds,prevIsAllDay=isAllDay,prevColDelta=colDelta,prevMinuteDelta=minuteDelta),eventElement.draggable("option","revert",!isInBounds)},stop:function(ev,ui){clearOverlays(),trigger("eventDragStop",eventElement,event,ev,ui),isInBounds&&(isAllDay||dayDelta||minuteDelta)?eventDrop(this,event,dayDelta,isAllDay?0:minuteDelta,isAllDay,ev,ui):(isInBounds=!0,isAllDay=!1,colDelta=0,dayDelta=0,minuteDelta=0,updateUI(),eventElement.css("filter",""),eventElement.css(origPosition),showEvents(event,eventElement))}})}function resizableSlotEvent(event,eventElement,timeElement){var snapDelta,prevSnapDelta,snapHeight=getSnapHeight(),snapMinutes=getSnapMinutes();eventElement.resizable({handles:{s:".ui-resizable-handle"},grid:snapHeight,start:function(ev,ui){snapDelta=prevSnapDelta=0,hideEvents(event,eventElement),trigger("eventResizeStart",this,event,ev,ui)},resize:function(ev,ui){snapDelta=Math.round((Math.max(snapHeight,eventElement.height())-ui.originalSize.height)/snapHeight),snapDelta!=prevSnapDelta&&(timeElement.text(formatDates(event.start,snapDelta||event.end?addMinutes(eventEnd(event),snapMinutes*snapDelta):null,opt("timeFormat"))),prevSnapDelta=snapDelta)},stop:function(ev,ui){trigger("eventResizeStop",this,event,ev,ui),snapDelta?eventResize(this,event,0,snapMinutes*snapDelta,ev,ui):showEvents(event,eventElement)}})}var t=this;t.renderEvents=renderEvents,t.clearEvents=clearEvents,t.slotSegHtml=slotSegHtml,DayEventRenderer.call(t);var opt=t.opt,trigger=t.trigger,isEventDraggable=t.isEventDraggable,isEventResizable=t.isEventResizable,eventEnd=t.eventEnd,eventElementHandlers=t.eventElementHandlers,setHeight=t.setHeight,getDaySegmentContainer=t.getDaySegmentContainer,getSlotSegmentContainer=t.getSlotSegmentContainer,getHoverListener=t.getHoverListener,getMaxMinute=t.getMaxMinute,getMinMinute=t.getMinMinute,timePosition=t.timePosition,getIsCellAllDay=t.getIsCellAllDay,colContentLeft=t.colContentLeft,colContentRight=t.colContentRight,cellToDate=t.cellToDate,getColCnt=t.getColCnt,getColWidth=t.getColWidth,getSnapHeight=t.getSnapHeight,getSnapMinutes=t.getSnapMinutes,getSlotContainer=t.getSlotContainer,reportEventElement=t.reportEventElement,showEvents=t.showEvents,hideEvents=t.hideEvents,eventDrop=t.eventDrop,eventResize=t.eventResize,renderDayOverlay=t.renderDayOverlay,clearOverlays=t.clearOverlays,renderDayEvents=t.renderDayEvents,calendar=t.calendar,formatDate=calendar.formatDate,formatDates=calendar.formatDates;t.draggableDayEvent=draggableDayEvent}function placeSlotSegs(segs){var i,levels=buildSlotSegLevels(segs),level0=levels[0];if(computeForwardSlotSegs(levels),level0){for(i=0;i<level0.length;i++)computeSlotSegPressures(level0[i]);for(i=0;i<level0.length;i++)computeSlotSegCoords(level0[i],0,0)}return flattenSlotSegLevels(levels)}function buildSlotSegLevels(segs){var i,seg,j,levels=[];for(i=0;i<segs.length;i++){for(seg=segs[i],j=0;j<levels.length&&computeSlotSegCollisions(seg,levels[j]).length;j++);(levels[j]||(levels[j]=[])).push(seg)}return levels}function computeForwardSlotSegs(levels){var i,level,j,seg,k;for(i=0;i<levels.length;i++)for(level=levels[i],j=0;j<level.length;j++)for(seg=level[j],seg.forwardSegs=[],k=i+1;k<levels.length;k++)computeSlotSegCollisions(seg,levels[k],seg.forwardSegs)}function computeSlotSegPressures(seg){var i,forwardSeg,forwardSegs=seg.forwardSegs,forwardPressure=0;if(seg.forwardPressure===undefined){for(i=0;i<forwardSegs.length;i++)forwardSeg=forwardSegs[i],computeSlotSegPressures(forwardSeg),forwardPressure=Math.max(forwardPressure,1+forwardSeg.forwardPressure);seg.forwardPressure=forwardPressure}}function computeSlotSegCoords(seg,seriesBackwardPressure,seriesBackwardCoord){var i,forwardSegs=seg.forwardSegs;if(seg.forwardCoord===undefined)for(forwardSegs.length?(forwardSegs.sort(compareForwardSlotSegs),computeSlotSegCoords(forwardSegs[0],seriesBackwardPressure+1,seriesBackwardCoord),seg.forwardCoord=forwardSegs[0].backwardCoord):seg.forwardCoord=1,seg.backwardCoord=seg.forwardCoord-(seg.forwardCoord-seriesBackwardCoord)/(seriesBackwardPressure+1),i=0;i<forwardSegs.length;i++)computeSlotSegCoords(forwardSegs[i],0,seg.forwardCoord)}function flattenSlotSegLevels(levels){var i,level,j,segs=[];for(i=0;i<levels.length;i++)for(level=levels[i],j=0;j<level.length;j++)segs.push(level[j]);return segs}function computeSlotSegCollisions(seg,otherSegs,results){results=results||[];for(var i=0;i<otherSegs.length;i++)isSlotSegCollision(seg,otherSegs[i])&&results.push(otherSegs[i]);return results}function isSlotSegCollision(seg1,seg2){return seg1.end>seg2.start&&seg1.start<seg2.end}function compareForwardSlotSegs(seg1,seg2){return seg2.forwardPressure-seg1.forwardPressure||(seg1.backwardCoord||0)-(seg2.backwardCoord||0)||compareSlotSegs(seg1,seg2)}function compareSlotSegs(seg1,seg2){return seg1.start-seg2.start||seg2.end-seg2.start-(seg1.end-seg1.start)||(seg1.event.title||"").localeCompare(seg2.event.title)}function View(element,calendar,viewName){function opt(name,viewNameOverride){var v=options[name];return $.isPlainObject(v)?smartProperty(v,viewNameOverride||viewName):v}function trigger(name,thisObj){return calendar.trigger.apply(calendar,[name,thisObj||t].concat(Array.prototype.slice.call(arguments,2),[t]))}function isEventDraggable(event){var source=event.source||{};return firstDefined(event.startEditable,source.startEditable,opt("eventStartEditable"),event.editable,source.editable,opt("editable"))&&!opt("disableDragging")}function isEventResizable(event){var source=event.source||{};return firstDefined(event.durationEditable,source.durationEditable,opt("eventDurationEditable"),event.editable,source.editable,opt("editable"))&&!opt("disableResizing")}function setEventData(events){eventsByID={};var i,event,len=events.length;for(i=0;len>i;i++)event=events[i],eventsByID[event._id]?eventsByID[event._id].push(event):eventsByID[event._id]=[event]}function clearEventData(){eventsByID={},eventElementsByID={},eventElementCouples=[]}function eventEnd(event){return event.end?cloneDate(event.end):defaultEventEnd(event)}function reportEventElement(event,element){eventElementCouples.push({event:event,element:element}),eventElementsByID[event._id]?eventElementsByID[event._id].push(element):eventElementsByID[event._id]=[element]}function triggerEventDestroy(){$.each(eventElementCouples,function(i,couple){t.trigger("eventDestroy",couple.event,couple.event,couple.element)})}function eventElementHandlers(event,eventElement){eventElement.click(function(ev){return eventElement.hasClass("ui-draggable-dragging")||eventElement.hasClass("ui-resizable-resizing")?void 0:trigger("eventClick",this,event,ev)
}).hover(function(ev){trigger("eventMouseover",this,event,ev)},function(ev){trigger("eventMouseout",this,event,ev)})}function showEvents(event,exceptElement){eachEventElement(event,exceptElement,"show")}function hideEvents(event,exceptElement){eachEventElement(event,exceptElement,"hide")}function eachEventElement(event,exceptElement,funcName){var i,elements=eventElementsByID[event._id],len=elements.length;for(i=0;len>i;i++)exceptElement&&elements[i][0]==exceptElement[0]||elements[i][funcName]()}function eventDrop(e,event,dayDelta,minuteDelta,allDay,ev,ui){var oldAllDay=event.allDay,eventId=event._id;moveEvents(eventsByID[eventId],dayDelta,minuteDelta,allDay),trigger("eventDrop",e,event,dayDelta,minuteDelta,allDay,function(){moveEvents(eventsByID[eventId],-dayDelta,-minuteDelta,oldAllDay),reportEventChange(eventId)},ev,ui),reportEventChange(eventId)}function eventResize(e,event,dayDelta,minuteDelta,ev,ui){var eventId=event._id;elongateEvents(eventsByID[eventId],dayDelta,minuteDelta),trigger("eventResize",e,event,dayDelta,minuteDelta,function(){elongateEvents(eventsByID[eventId],-dayDelta,-minuteDelta),reportEventChange(eventId)},ev,ui),reportEventChange(eventId)}function moveEvents(events,dayDelta,minuteDelta,allDay){minuteDelta=minuteDelta||0;for(var e,len=events.length,i=0;len>i;i++)e=events[i],allDay!==undefined&&(e.allDay=allDay),addMinutes(addDays(e.start,dayDelta,!0),minuteDelta),e.end&&(e.end=addMinutes(addDays(e.end,dayDelta,!0),minuteDelta)),normalizeEvent(e,options)}function elongateEvents(events,dayDelta,minuteDelta){minuteDelta=minuteDelta||0;for(var e,len=events.length,i=0;len>i;i++)e=events[i],e.end=addMinutes(addDays(eventEnd(e),dayDelta,!0),minuteDelta),normalizeEvent(e,options)}function isHiddenDay(day){return"object"==typeof day&&(day=day.getDay()),isHiddenDayHash[day]}function getCellsPerWeek(){return cellsPerWeek}function skipHiddenDays(date,inc,isExclusive){for(inc=inc||1;isHiddenDayHash[(date.getDay()+(isExclusive?inc:0)+7)%7];)addDays(date,inc)}function cellToDate(){var cellOffset=cellToCellOffset.apply(null,arguments),dayOffset=cellOffsetToDayOffset(cellOffset),date=dayOffsetToDate(dayOffset);return date}function cellToCellOffset(row,col){var colCnt=t.getColCnt(),dis=isRTL?-1:1,dit=isRTL?colCnt-1:0;"object"==typeof row&&(col=row.col,row=row.row);var cellOffset=row*colCnt+(col*dis+dit);return cellOffset}function cellOffsetToDayOffset(cellOffset){var day0=t.visStart.getDay();return cellOffset+=dayToCellMap[day0],7*Math.floor(cellOffset/cellsPerWeek)+cellToDayMap[(cellOffset%cellsPerWeek+cellsPerWeek)%cellsPerWeek]-day0}function dayOffsetToDate(dayOffset){var date=cloneDate(t.visStart);return addDays(date,dayOffset),date}function dateToCell(date){var dayOffset=dateToDayOffset(date),cellOffset=dayOffsetToCellOffset(dayOffset),cell=cellOffsetToCell(cellOffset);return cell}function dateToDayOffset(date){return dayDiff(date,t.visStart)}function dayOffsetToCellOffset(dayOffset){var day0=t.visStart.getDay();return dayOffset+=day0,Math.floor(dayOffset/7)*cellsPerWeek+dayToCellMap[(dayOffset%7+7)%7]-dayToCellMap[day0]}function cellOffsetToCell(cellOffset){var colCnt=t.getColCnt(),dis=isRTL?-1:1,dit=isRTL?colCnt-1:0,row=Math.floor(cellOffset/colCnt),col=(cellOffset%colCnt+colCnt)%colCnt*dis+dit;return{row:row,col:col}}function rangeToSegments(startDate,endDate){for(var rowCnt=t.getRowCnt(),colCnt=t.getColCnt(),segments=[],rangeDayOffsetStart=dateToDayOffset(startDate),rangeDayOffsetEnd=dateToDayOffset(endDate),rangeCellOffsetFirst=dayOffsetToCellOffset(rangeDayOffsetStart),rangeCellOffsetLast=dayOffsetToCellOffset(rangeDayOffsetEnd)-1,row=0;rowCnt>row;row++){var rowCellOffsetFirst=row*colCnt,rowCellOffsetLast=rowCellOffsetFirst+colCnt-1,segmentCellOffsetFirst=Math.max(rangeCellOffsetFirst,rowCellOffsetFirst),segmentCellOffsetLast=Math.min(rangeCellOffsetLast,rowCellOffsetLast);if(segmentCellOffsetLast>=segmentCellOffsetFirst){var segmentCellFirst=cellOffsetToCell(segmentCellOffsetFirst),segmentCellLast=cellOffsetToCell(segmentCellOffsetLast),cols=[segmentCellFirst.col,segmentCellLast.col].sort(),isStart=cellOffsetToDayOffset(segmentCellOffsetFirst)==rangeDayOffsetStart,isEnd=cellOffsetToDayOffset(segmentCellOffsetLast)+1==rangeDayOffsetEnd;segments.push({row:row,leftCol:cols[0],rightCol:cols[1],isStart:isStart,isEnd:isEnd})}}return segments}var t=this;t.element=element,t.calendar=calendar,t.name=viewName,t.opt=opt,t.trigger=trigger,t.isEventDraggable=isEventDraggable,t.isEventResizable=isEventResizable,t.setEventData=setEventData,t.clearEventData=clearEventData,t.eventEnd=eventEnd,t.reportEventElement=reportEventElement,t.triggerEventDestroy=triggerEventDestroy,t.eventElementHandlers=eventElementHandlers,t.showEvents=showEvents,t.hideEvents=hideEvents,t.eventDrop=eventDrop,t.eventResize=eventResize;var defaultEventEnd=t.defaultEventEnd,normalizeEvent=calendar.normalizeEvent,reportEventChange=calendar.reportEventChange,eventsByID={},eventElementsByID={},eventElementCouples=[],options=calendar.options;t.isHiddenDay=isHiddenDay,t.skipHiddenDays=skipHiddenDays,t.getCellsPerWeek=getCellsPerWeek,t.dateToCell=dateToCell,t.dateToDayOffset=dateToDayOffset,t.dayOffsetToCellOffset=dayOffsetToCellOffset,t.cellOffsetToCell=cellOffsetToCell,t.cellToDate=cellToDate,t.cellToCellOffset=cellToCellOffset,t.cellOffsetToDayOffset=cellOffsetToDayOffset,t.dayOffsetToDate=dayOffsetToDate,t.rangeToSegments=rangeToSegments;var cellsPerWeek,hiddenDays=opt("hiddenDays")||[],isHiddenDayHash=[],dayToCellMap=[],cellToDayMap=[],isRTL=opt("isRTL");!function(){opt("weekends")===!1&&hiddenDays.push(0,6);for(var dayIndex=0,cellIndex=0;7>dayIndex;dayIndex++)dayToCellMap[dayIndex]=cellIndex,isHiddenDayHash[dayIndex]=-1!=$.inArray(dayIndex,hiddenDays),isHiddenDayHash[dayIndex]||(cellToDayMap[cellIndex]=dayIndex,cellIndex++);if(cellsPerWeek=cellIndex,!cellsPerWeek)throw"invalid hiddenDays"}()}function DayEventRenderer(){function renderDayEvents(events,modifiedEventId){var segments=_renderDayEvents(events,!1,!0);segmentElementEach(segments,function(segment,element){reportEventElement(segment.event,element)}),attachHandlers(segments,modifiedEventId),segmentElementEach(segments,function(segment,element){trigger("eventAfterRender",segment.event,segment.event,element)})}function renderTempDayEvent(event,adjustRow,adjustTop){var segments=_renderDayEvents([event],!0,!1),elements=[];return segmentElementEach(segments,function(segment,element){segment.row===adjustRow&&element.css("top",adjustTop),elements.push(element[0])}),elements}function _renderDayEvents(events,doAppend,doRowHeights){var html,elements,finalContainer=getDaySegmentContainer(),renderContainer=doAppend?$("<div/>"):finalContainer,segments=buildSegments(events);return calculateHorizontals(segments),html=buildHTML(segments),renderContainer[0].innerHTML=html,elements=renderContainer.children(),doAppend&&finalContainer.append(elements),resolveElements(segments,elements),segmentElementEach(segments,function(segment,element){segment.hsides=hsides(element,!0)}),segmentElementEach(segments,function(segment,element){element.width(Math.max(0,segment.outerWidth-segment.hsides))}),segmentElementEach(segments,function(segment,element){segment.outerHeight=element.outerHeight(!0)}),setVerticals(segments,doRowHeights),segments}function buildSegments(events){for(var segments=[],i=0;i<events.length;i++){var eventSegments=buildSegmentsForEvent(events[i]);segments.push.apply(segments,eventSegments)}return segments}function buildSegmentsForEvent(event){for(var startDate=event.start,endDate=exclEndDay(event),segments=rangeToSegments(startDate,endDate),i=0;i<segments.length;i++)segments[i].event=event;return segments}function calculateHorizontals(segments){for(var isRTL=opt("isRTL"),i=0;i<segments.length;i++){var segment=segments[i],leftFunc=(isRTL?segment.isEnd:segment.isStart)?colContentLeft:colLeft,rightFunc=(isRTL?segment.isStart:segment.isEnd)?colContentRight:colRight,left=leftFunc(segment.leftCol),right=rightFunc(segment.rightCol);segment.left=left,segment.outerWidth=right-left}}function buildHTML(segments){for(var html="",i=0;i<segments.length;i++)html+=buildHTMLForSegment(segments[i]);return html}function buildHTMLForSegment(segment){var html="",isRTL=opt("isRTL"),event=segment.event,url=event.url,classNames=["fc-event","fc-event-hori"];isEventDraggable(event)&&classNames.push("fc-event-draggable"),segment.isStart&&classNames.push("fc-event-start"),segment.isEnd&&classNames.push("fc-event-end"),classNames=classNames.concat(event.className),event.source&&(classNames=classNames.concat(event.source.className||[]));var skinCss=getSkinCss(event,opt);return html+=url?"<a href='"+htmlEscape(url)+"'":"<div",html+=" class='"+classNames.join(" ")+"' style='position:absolute;left:"+segment.left+"px;"+skinCss+"'><div class='fc-event-inner'>",!event.allDay&&segment.isStart&&(html+="<span class='fc-event-time'>"+htmlEscape(formatDates(event.start,event.end,opt("timeFormat")))+"</span>"),html+="<span class='fc-event-title'>"+htmlEscape(event.title||"")+"</span></div>",segment.isEnd&&isEventResizable(event)&&(html+="<div class='ui-resizable-handle ui-resizable-"+(isRTL?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),html+="</"+(url?"a":"div")+">"}function resolveElements(segments,elements){for(var i=0;i<segments.length;i++){var segment=segments[i],event=segment.event,element=elements.eq(i),triggerRes=trigger("eventRender",event,event,element);triggerRes===!1?element.remove():(triggerRes&&triggerRes!==!0&&(triggerRes=$(triggerRes).css({position:"absolute",left:segment.left}),element.replaceWith(triggerRes),element=triggerRes),segment.element=element)}}function setVerticals(segments,doRowHeights){var rowContentHeights=calculateVerticals(segments),rowContentElements=getRowContentElements(),rowContentTops=[];if(doRowHeights)for(var i=0;i<rowContentElements.length;i++)rowContentElements[i].height(rowContentHeights[i]);for(var i=0;i<rowContentElements.length;i++)rowContentTops.push(rowContentElements[i].position().top);segmentElementEach(segments,function(segment,element){element.css("top",rowContentTops[segment.row]+segment.top)})}function calculateVerticals(segments){for(var rowCnt=getRowCnt(),colCnt=getColCnt(),rowContentHeights=[],segmentRows=buildSegmentRows(segments),rowI=0;rowCnt>rowI;rowI++){for(var segmentRow=segmentRows[rowI],colHeights=[],colI=0;colCnt>colI;colI++)colHeights.push(0);for(var segmentI=0;segmentI<segmentRow.length;segmentI++){var segment=segmentRow[segmentI];segment.top=arrayMax(colHeights.slice(segment.leftCol,segment.rightCol+1));for(var colI=segment.leftCol;colI<=segment.rightCol;colI++)colHeights[colI]=segment.top+segment.outerHeight}rowContentHeights.push(arrayMax(colHeights))}return rowContentHeights}function buildSegmentRows(segments){var segmentI,segment,rowI,rowCnt=getRowCnt(),segmentRows=[];for(segmentI=0;segmentI<segments.length;segmentI++)segment=segments[segmentI],rowI=segment.row,segment.element&&(segmentRows[rowI]?segmentRows[rowI].push(segment):segmentRows[rowI]=[segment]);for(rowI=0;rowCnt>rowI;rowI++)segmentRows[rowI]=sortSegmentRow(segmentRows[rowI]||[]);return segmentRows}function sortSegmentRow(segments){for(var sortedSegments=[],subrows=buildSegmentSubrows(segments),i=0;i<subrows.length;i++)sortedSegments.push.apply(sortedSegments,subrows[i]);return sortedSegments}function buildSegmentSubrows(segments){segments.sort(compareDaySegments);for(var subrows=[],i=0;i<segments.length;i++){for(var segment=segments[i],j=0;j<subrows.length&&isDaySegmentCollision(segment,subrows[j]);j++);subrows[j]?subrows[j].push(segment):subrows[j]=[segment]}return subrows}function getRowContentElements(){var i,rowCnt=getRowCnt(),rowDivs=[];for(i=0;rowCnt>i;i++)rowDivs[i]=allDayRow(i).find("div.fc-day-content > div");return rowDivs}function attachHandlers(segments,modifiedEventId){var segmentContainer=getDaySegmentContainer();segmentElementEach(segments,function(segment,element,i){var event=segment.event;event._id===modifiedEventId?bindDaySeg(event,element,segment):element[0]._fci=i}),lazySegBind(segmentContainer,segments,bindDaySeg)}function bindDaySeg(event,eventElement,segment){isEventDraggable(event)&&t.draggableDayEvent(event,eventElement,segment),segment.isEnd&&isEventResizable(event)&&t.resizableDayEvent(event,eventElement,segment),eventElementHandlers(event,eventElement)}function draggableDayEvent(event,eventElement){var dayDelta,hoverListener=getHoverListener();eventElement.draggable({delay:50,opacity:opt("dragOpacity"),revertDuration:opt("dragRevertDuration"),start:function(ev,ui){trigger("eventDragStart",eventElement,event,ev,ui),hideEvents(event,eventElement),hoverListener.start(function(cell,origCell,rowDelta,colDelta){if(eventElement.draggable("option","revert",!cell||!rowDelta&&!colDelta),clearOverlays(),cell){var origDate=cellToDate(origCell),date=cellToDate(cell);dayDelta=dayDiff(date,origDate),renderDayOverlay(addDays(cloneDate(event.start),dayDelta),addDays(exclEndDay(event),dayDelta))}else dayDelta=0},ev,"drag")},stop:function(ev,ui){hoverListener.stop(),clearOverlays(),trigger("eventDragStop",eventElement,event,ev,ui),dayDelta?eventDrop(this,event,dayDelta,0,event.allDay,ev,ui):(eventElement.css("filter",""),showEvents(event,eventElement))}})}function resizableDayEvent(event,element,segment){var isRTL=opt("isRTL"),direction=isRTL?"w":"e",handle=element.find(".ui-resizable-"+direction),isResizing=!1;disableTextSelection(element),element.mousedown(function(ev){ev.preventDefault()}).click(function(ev){isResizing&&(ev.preventDefault(),ev.stopImmediatePropagation())}),handle.mousedown(function(ev){function mouseup(ev){trigger("eventResizeStop",this,event,ev),$("body").css("cursor",""),hoverListener.stop(),clearOverlays(),dayDelta&&eventResize(this,event,dayDelta,0,ev),setTimeout(function(){isResizing=!1},0)}if(1==ev.which){isResizing=!0;var dayDelta,helpers,hoverListener=getHoverListener(),elementTop=(getRowCnt(),getColCnt(),element.css("top")),eventCopy=$.extend({},event),minCellOffset=dayOffsetToCellOffset(dateToDayOffset(event.start));clearSelection(),$("body").css("cursor",direction+"-resize").one("mouseup",mouseup),trigger("eventResizeStart",this,event,ev),hoverListener.start(function(cell,origCell){if(cell){var origCellOffset=cellToCellOffset(origCell),cellOffset=cellToCellOffset(cell);if(cellOffset=Math.max(cellOffset,minCellOffset),dayDelta=cellOffsetToDayOffset(cellOffset)-cellOffsetToDayOffset(origCellOffset)){eventCopy.end=addDays(eventEnd(event),dayDelta,!0);var oldHelpers=helpers;helpers=renderTempDayEvent(eventCopy,segment.row,elementTop),helpers=$(helpers),helpers.find("*").css("cursor",direction+"-resize"),oldHelpers&&oldHelpers.remove(),hideEvents(event)}else helpers&&(showEvents(event),helpers.remove(),helpers=null);clearOverlays(),renderDayOverlay(event.start,addDays(exclEndDay(event),dayDelta))}},ev)}})}var t=this;t.renderDayEvents=renderDayEvents,t.draggableDayEvent=draggableDayEvent,t.resizableDayEvent=resizableDayEvent;var opt=t.opt,trigger=t.trigger,isEventDraggable=t.isEventDraggable,isEventResizable=t.isEventResizable,eventEnd=t.eventEnd,reportEventElement=t.reportEventElement,eventElementHandlers=t.eventElementHandlers,showEvents=t.showEvents,hideEvents=t.hideEvents,eventDrop=t.eventDrop,eventResize=t.eventResize,getRowCnt=t.getRowCnt,getColCnt=t.getColCnt,allDayRow=(t.getColWidth,t.allDayRow),colLeft=t.colLeft,colRight=t.colRight,colContentLeft=t.colContentLeft,colContentRight=t.colContentRight,getDaySegmentContainer=(t.dateToCell,t.getDaySegmentContainer),formatDates=t.calendar.formatDates,renderDayOverlay=t.renderDayOverlay,clearOverlays=t.clearOverlays,clearSelection=t.clearSelection,getHoverListener=t.getHoverListener,rangeToSegments=t.rangeToSegments,cellToDate=t.cellToDate,cellToCellOffset=t.cellToCellOffset,cellOffsetToDayOffset=t.cellOffsetToDayOffset,dateToDayOffset=t.dateToDayOffset,dayOffsetToCellOffset=t.dayOffsetToCellOffset}function isDaySegmentCollision(segment,otherSegments){for(var i=0;i<otherSegments.length;i++){var otherSegment=otherSegments[i];if(otherSegment.leftCol<=segment.rightCol&&otherSegment.rightCol>=segment.leftCol)return!0}return!1}function segmentElementEach(segments,callback){for(var i=0;i<segments.length;i++){var segment=segments[i],element=segment.element;element&&callback(segment,element,i)}}function compareDaySegments(a,b){return b.rightCol-b.leftCol-(a.rightCol-a.leftCol)||b.event.allDay-a.event.allDay||a.event.start-b.event.start||(a.event.title||"").localeCompare(b.event.title)}function SelectionManager(){function select(startDate,endDate,allDay){unselect(),endDate||(endDate=defaultSelectionEnd(startDate,allDay)),renderSelection(startDate,endDate,allDay),reportSelection(startDate,endDate,allDay)}function unselect(ev){selected&&(selected=!1,clearSelection(),trigger("unselect",null,ev))}function reportSelection(startDate,endDate,allDay,ev){selected=!0,trigger("select",null,startDate,endDate,allDay,ev)}function daySelectionMousedown(ev){var cellToDate=t.cellToDate,getIsCellAllDay=t.getIsCellAllDay,hoverListener=t.getHoverListener(),reportDayClick=t.reportDayClick;if(1==ev.which&&opt("selectable")){unselect(ev);var dates;hoverListener.start(function(cell,origCell){clearSelection(),cell&&getIsCellAllDay(cell)?(dates=[cellToDate(origCell),cellToDate(cell)].sort(dateCompare),renderSelection(dates[0],dates[1],!0)):dates=null},ev),$(document).one("mouseup",function(ev){hoverListener.stop(),dates&&(+dates[0]==+dates[1]&&reportDayClick(dates[0],!0,ev),reportSelection(dates[0],dates[1],!0,ev))})}}var t=this;t.select=select,t.unselect=unselect,t.reportSelection=reportSelection,t.daySelectionMousedown=daySelectionMousedown;var opt=t.opt,trigger=t.trigger,defaultSelectionEnd=t.defaultSelectionEnd,renderSelection=t.renderSelection,clearSelection=t.clearSelection,selected=!1;opt("selectable")&&opt("unselectAuto")&&$(document).mousedown(function(ev){var ignore=opt("unselectCancel");ignore&&$(ev.target).parents(ignore).length||unselect(ev)})}function OverlayManager(){function renderOverlay(rect,parent){var e=unusedOverlays.shift();return e||(e=$("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),e[0].parentNode!=parent[0]&&e.appendTo(parent),usedOverlays.push(e.css(rect).show()),e}function clearOverlays(){for(var e;e=usedOverlays.shift();)unusedOverlays.push(e.hide().unbind())}var t=this;t.renderOverlay=renderOverlay,t.clearOverlays=clearOverlays;var usedOverlays=[],unusedOverlays=[]}function CoordinateGrid(buildFunc){var rows,cols,t=this;t.build=function(){rows=[],cols=[],buildFunc(rows,cols)},t.cell=function(x,y){var i,rowCnt=rows.length,colCnt=cols.length,r=-1,c=-1;for(i=0;rowCnt>i;i++)if(y>=rows[i][0]&&y<rows[i][1]){r=i;break}for(i=0;colCnt>i;i++)if(x>=cols[i][0]&&x<cols[i][1]){c=i;break}return r>=0&&c>=0?{row:r,col:c}:null},t.rect=function(row0,col0,row1,col1,originElement){var origin=originElement.offset();return{top:rows[row0][0]-origin.top,left:cols[col0][0]-origin.left,width:cols[col1][1]-cols[col0][0],height:rows[row1][1]-rows[row0][0]}}}function HoverListener(coordinateGrid){function mouse(ev){_fixUIEvent(ev);var newCell=coordinateGrid.cell(ev.pageX,ev.pageY);(!newCell!=!cell||newCell&&(newCell.row!=cell.row||newCell.col!=cell.col))&&(newCell?(firstCell||(firstCell=newCell),change(newCell,firstCell,newCell.row-firstCell.row,newCell.col-firstCell.col)):change(newCell,firstCell),cell=newCell)}var bindType,change,firstCell,cell,t=this;t.start=function(_change,ev,_bindType){change=_change,firstCell=cell=null,coordinateGrid.build(),mouse(ev),bindType=_bindType||"mousemove",$(document).bind(bindType,mouse)},t.stop=function(){return $(document).unbind(bindType,mouse),cell}}function _fixUIEvent(event){event.pageX===undefined&&(event.pageX=event.originalEvent.pageX,event.pageY=event.originalEvent.pageY)}function HorizontalPositionCache(getElement){function e(i){return elements[i]=elements[i]||getElement(i)}var t=this,elements={},lefts={},rights={};t.left=function(i){return lefts[i]=lefts[i]===undefined?e(i).position().left:lefts[i]},t.right=function(i){return rights[i]=rights[i]===undefined?t.left(i)+e(i).width():rights[i]},t.clear=function(){elements={},lefts={},rights={}}}var defaults={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},fc=$.fullCalendar={version:"1.6.4"},fcViews=fc.views={};$.fn.fullCalendar=function(options){if("string"==typeof options){var res,args=Array.prototype.slice.call(arguments,1);return this.each(function(){var calendar=$.data(this,"fullCalendar");if(calendar&&$.isFunction(calendar[options])){var r=calendar[options].apply(calendar,args);res===undefined&&(res=r),"destroy"==options&&$.removeData(this,"fullCalendar")}}),res!==undefined?res:this}options=options||{};var eventSources=options.eventSources||[];return delete options.eventSources,options.events&&(eventSources.push(options.events),delete options.events),options=$.extend(!0,{},defaults,options.isRTL||options.isRTL===undefined&&defaults.isRTL?rtlDefaults:{},options),this.each(function(i,_element){var element=$(_element),calendar=new Calendar(element,options,eventSources);element.data("fullCalendar",calendar),calendar.render()}),this},fc.sourceNormalizers=[],fc.sourceFetchers=[];var ajaxDefaults={dataType:"json",cache:!1},eventGUID=1;fc.addDays=addDays,fc.cloneDate=cloneDate,fc.parseDate=parseDate,fc.parseISO8601=parseISO8601,fc.parseTime=parseTime,fc.formatDate=formatDate,fc.formatDates=formatDates;var dayIDs=["sun","mon","tue","wed","thu","fri","sat"],DAY_MS=864e5,HOUR_MS=36e5,MINUTE_MS=6e4,dateFormatters={s:function(d){return d.getSeconds()},ss:function(d){return zeroPad(d.getSeconds())},m:function(d){return d.getMinutes()},mm:function(d){return zeroPad(d.getMinutes())},h:function(d){return d.getHours()%12||12},hh:function(d){return zeroPad(d.getHours()%12||12)},H:function(d){return d.getHours()},HH:function(d){return zeroPad(d.getHours())},d:function(d){return d.getDate()},dd:function(d){return zeroPad(d.getDate())},ddd:function(d,o){return o.dayNamesShort[d.getDay()]},dddd:function(d,o){return o.dayNames[d.getDay()]},M:function(d){return d.getMonth()+1},MM:function(d){return zeroPad(d.getMonth()+1)},MMM:function(d,o){return o.monthNamesShort[d.getMonth()]},MMMM:function(d,o){return o.monthNames[d.getMonth()]},yy:function(d){return(d.getFullYear()+"").substring(2)},yyyy:function(d){return d.getFullYear()},t:function(d){return d.getHours()<12?"a":"p"},tt:function(d){return d.getHours()<12?"am":"pm"},T:function(d){return d.getHours()<12?"A":"P"},TT:function(d){return d.getHours()<12?"AM":"PM"},u:function(d){return formatDate(d,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(d){var date=d.getDate();return date>10&&20>date?"th":["st","nd","rd"][date%10-1]||"th"},w:function(d,o){return o.weekNumberCalculation(d)},W:function(d){return iso8601Week(d)}};fc.dateFormatters=dateFormatters,fc.applyAll=applyAll,fcViews.month=MonthView,fcViews.basicWeek=BasicWeekView,fcViews.basicDay=BasicDayView,setDefaults({weekMode:"fixed"}),fcViews.agendaWeek=AgendaWeekView,fcViews.agendaDay=AgendaDayView,setDefaults({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery);