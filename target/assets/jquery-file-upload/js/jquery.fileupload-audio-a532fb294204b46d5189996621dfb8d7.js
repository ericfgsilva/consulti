!function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],factory):factory(window.jQuery,window.loadImage)}(function($,loadImage){"use strict";$.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"}),$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),processActions:{loadAudio:function(data,options){if(options.disabled)return data;var url,audio,file=data.files[data.index];return this._audioElement.canPlayType&&this._audioElement.canPlayType(file.type)&&("number"!==$.type(options.maxFileSize)||file.size<=options.maxFileSize)&&(!options.fileTypes||options.fileTypes.test(file.type))&&(url=loadImage.createObjectURL(file))?(audio=this._audioElement.cloneNode(!1),audio.src=url,audio.controls=!0,data.audio=audio,data):data},setAudio:function(data,options){return data.audio&&!options.disabled&&(data.files[data.index][options.name||"preview"]=data.audio),data}}})});